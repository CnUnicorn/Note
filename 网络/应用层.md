# DNS

* **分布式数据库**

* 每个站点只保留它自己的那部分数据

* 层次结构

* 可以使用UDP或TCP传输，大多数情况使用UDP传输

  使用TCP传输的两种情况：

  * 返回响应超过512字节（UDP最大支持512字节数据）
  * 区域传送（区域传送是主域名服务器向辅助域名服务器传送变化的那部分数据）



DNS解析过程：

1. 浏览器先检查自身缓存有没有解析过这个域名，如果有，解析结束
2. 如果浏览器没有，浏览器会检查操作系统的缓存中有没有对应的已解析的过的结果。
3. 如果操作系统还没有，请求本地域名服务器（LDNS）
4. 如果LDNS还没有，跳转到Root Server域名服务器解析。

5. 根域名服务器返回给LDNS一个所查询域的主域名服务器（gTLD Server，国际顶尖域名服务器，如**.com .cn .org**等）地址

6. 此时LDNS再发送请求给上一步返回的gTLD

7. 接受请求的gTLD查找并返回这个域名对应的Name Server的地址，这个Name Server就是网站注册的域名服务器

8. Name Server根据映射关系表找到目标ip，返回给LDNS

9. LDNS缓存这个域名和对应的ip

10. LDNS把解析的结果返回给用户，用户根据TTL值缓存到本地系统缓存中，域名解析过程至此结束