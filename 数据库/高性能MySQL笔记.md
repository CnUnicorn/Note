# MySQL逻辑架构

* 最上层并不是MySQL所独有的，大多数基于网络的客户端/服务器的工具或者服务都有类似的架构。比如连接处理、授权认证、安全等等。
* 第二层架构是服务器层。大多数MySQL核心功能都在这一层，包括查询**解析、分析、优化、缓存以及所有的内置函数（例如，日期、时间、数学和加密函数）**，所有**跨存储引擎的功能**都在这一层实现：**存储过程、触发器、视图等**。
* 第三层包含了存储引擎。存储引擎负责MySQL中数据的存储和提取。

<img src="高性能MySQL笔记.assets/image-20201209110045035.png" alt="image-20201209110045035" style="zoom:80%;" />

<center>MySQL服务器逻辑架构图</center>



# 表锁和行锁

**表锁（table lock）：**表锁是开销最小的策略，锁定整张表。其中写锁比读锁有更高的优先级，一个写锁请求可能会插入到读锁队列前面（**写锁可以插入到锁队列中的读锁的前面**，反之读锁不能插入到写锁的前面）。



**行级锁（row lock）：**行级锁最大程度支持并发处理（粒度小，同时带来的开销最大）。InnoDB实现了行级锁，MyISAM只有表锁。行级锁**只在存储引擎层实现，在MySQL服务器层没有实现。**服务器层完全不了解存储引擎中的的锁实现。