# 1. CHAR 和 VARCHAR 的区别

CHAR(n) 与 VARCHAR(n) 中的参数 n 表示**字符数**而不是字节数。



**CHAR：**定长字符串

* 长度范围：0 - 255
* CHAR(20)，如果存储一个长度不足20的字符，MySQL会用空格填充后面剩余的字符；如果超出了20个字符，就只保存前20个字符。



**VARCHAR：**变长字符串

* 长度范围：0 - 65535 
* VARCHAR(20)，如果存储一个长度不足20的字符，系统根据实际存储的数据量来分配合适的存储空间，如存放 'abcd' ，需要五个字节，一个字节用来存储长度，另外四个字节用来存储数据。**如果数据长度小于255个字符，使用一个字节来存储字符长度，如果数据长度大于255个字符，使用两个字节来记录字符长度。**



# 2. 主键约束和唯一约束的区别

**主键约束（PRIMARY KEY)：**

- PRIMAEY KEY 主键，是唯一的，一张表只能有一个主键
- AUTO_INCREMENT 一定要和主键连用
- 但主键不一定要和 AUTO_INCREMENT 连用
- 主键一定是非空的 NOT NULL
- 主键列上没有任何两行具有相同值（重复值）。且**不能更新**

**唯一约束（UNIQUE KEY）：**

- UNIQUE KEY 唯一约束
- 唯一约束可以保证数据的唯一性
- 唯一约束的字段可以为空
- 每张数据表可以有存在多个唯一约束
- **只要唯一就可以更新**



# 3. MySQL为表字段添加和删除索引

1. 添加PRIMARY KEY（主键索引）

   `ALTER TABLE 'table name' ADD PRIMARY KEY ('column')`

2. 添加UNIQUE（唯一索引）

   `ALTER TABLE 'table name' ADD UNIQUE ('column')`

3. 添加INDEX（普通索引）

   `ALTER TABLR 'table name' ADD INDEX index_name ('column')`，index_name为自定义索引名

4. 添加FULLTEXT（全文索引）

   `ALTER TABLE 'table name' ADD INDEX index_name ('column')`

5. 添加多列索引（联合索引）

   `ALTER TABLE 'table name' ADD INDEX index_name ('column1', 'column2', 'column3')`



**删除索引：**

`DROP INDEX index_name ON 'table name'`



**查看表中的所有索引：**

`SHOW keys FROM 'table name'`



# 4. 数据库连接

**数据库连接本质就是⼀个 socket 的连接**。数据库服务端还要维护⼀些缓存和⽤户权限信息之类的 所 以占⽤了⼀些内存。我们可以把数据库连接池是看做是维护的数据库连接的缓存，以便将来需要对数据 库的请求时可以重⽤这些连接。为每个⽤户打开和维护数据库连接，尤其是对动态数据库驱动的⽹站应⽤程序的请求，既昂贵⼜浪费资源。在连接池中，创建连接后，将其放置在池中，并再次使⽤它，因此不必建立新的连接。如果使⽤了所有连接，则会建⽴⼀个新连接并将其添加到池中。 连接池还减少了 ⽤户必须等待建⽴与数据库的连接的时间



# 5. Where从句中禁止对列进行函数转换和计算

**原因：**对列进行**函数转换和计算**时，**会导致索引无法使用**。

如，以下操作不推荐：

```sql
where date(create_time) = '20190101'
where c - 1 = 1000; -- 应该写成 where c = 1000 + 1，数据库不会自动优化
```



# 6. sql优化-大数据量分页查询

这篇博客讲的不错。核心就是分页查询的时候不要直接用 `LIMIT 10000000， 1` 这种方式来指定分页的起点，使用LIMIT指定起点，数据库会从头开始遍历到起点，数据量很大，且起点也非常大的时候，非常浪费时间 。应该在查询条件中，对**有索引的字段上设置查询范围来代替用 LIMIT 设置起点**。仅使用LIMIT来设置分页的大小，如 `LIMIT 10`，表示查询十条数据。

[sql优化之大数据量分页查询（mysql） - 杨冠标 - 博客园 (cnblogs.com)](https://www.cnblogs.com/yanggb/p/11058707.html)



# 7. 事务的四大特性（ACID）

1. **原子性（Atomicity）**： 事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么全部不起作用；
2. **一致性（Consistency）**： 执行事务前后，数据保持⼀致，多个事务对同⼀个数据读取的结果是相同的；
3. **隔离性（Isolation）**： 并发访问数据库时，⼀个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的；
4. **持久性（Durability）**： ⼀个事务被提交之后。它对数据库中数据的改变是持久的，即使数据 库发生故障也不应该对其有任何影响。



# 8. show processlist指令

`show processlist` 指令显示哪些线程正在运行。如果有SUPER权限，可以看到所有线程，否则就只能看到自己的线程。



