# 贷款年化利率

利率和坏账损失统一变换口径，比如都是年化的



贷款年化利率：

APR（名义利率）：

![image-20241022203848549](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022203848549.png)

IRR（真实利率）：

**IRR原始公式：**

**每一期的还款金额都折算到放款日同一时间点进行计算：**针对12期的产品，最后一期支付的还款金额，被占用了12个月；倒数第二期支付的还款金额，被占用了11个月；···依次类推，第一期支付的还款金额，被占用了1个月。

粗浅的理解：相当于被占用的金额，按照利息贬值，越晚还款的前贬值越多，最后折现成本金。

![image-20241022205242433](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022205242433.png)

公式介绍：

**n：年内还款频率。**

**T：还款年数。**

**如一年期限的产品，按月还款：n=12，T=1**

**五年期产品，按月还款：n=12，T=5**

![image-20241022205926211](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022205926211.png)



![image-20241022215639310](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022215639310.png)

**从不同角度考虑IRR：**

![image-20241022215719399](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022215719399.png)





**从本金占用的角度考虑的IRR公式：**

（每期归还的利息 / 每期平均占用的本金）*一年周转次数

![image-20241022212443137](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022212443137.png)

![image-20241022215813435](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022215813435.png)





**从满额占用本金时间的角度考虑的IRR公式：**

业内也叫**生息月份**或者**生息期数**，也是**久期**的概念，只不过叫法不同：

![image-20241022212941753](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022212941753.png)

![image-20241022215838341](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022215838341.png)



**APR和IRR的区别：**

从公式的角度看，APR与IRR的两种公式的形式都是一样的

APR与从占用平均本金的IRR公式对比：差别在，分母变成了平均占用本金

APR与从占用满额本金时间的IRR公式对比：差别在，贷款期限（月）变成了，占用满额本金的月份。



对于相同的还款利息，相同的还款本金：计算得到的APR一定是比IRR要小的。

从本金角度考虑：APR（名义利率）认为每一期都占用了满额的本金；而IRR考虑到随着还款进行，占用本金变少，所以相同利息下，IRR要大于APR。

比如三期的网贷：本金5000，每期还款1767.65。APR是24%，IRR是36%。

![image-20241022213742373](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20241022213742373.png)



# 1.策略开发和调优

规则和模型本质上都是策略的工具，只不过模型是复杂的规则（或者说规则是简单的模型）。

规则和模型都是为了业务策略服务的，规则和模型只是业务策略中得一个环节，只对自己得风险识别能力负责，至于要使用什么数据、阈值设定、调用顺序、使用位置等都是策略需要考虑得事情（特征变量由专门岗位的人产出，策略直接进入分析阶段）。

![image-20250105141824316](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105141824316.png)

## 1.1规则认识和类型

### 1.1.1策略维度

策略维度如下：评分类综合分中，目前消费分还没涉及到。

![image-20250105140839872](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105140839872.png)



### 1.1.2规则强弱程度

![image-20250105141003480](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105141003480.png)

弱规则一般是连续性数值变量，且变量**具有一定的排序性**。



### 1.1.3规则案例

![image-20250105141218246](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105141218246.png)

重点在：数据含义，规则描述，规则强度（案例中红色是强规则）

## 1.2.规则分析全流程介绍

### 1.2.1.规则全流程

规则完整流程：

1. 规则离线开发和评估
2. 规则上线和监控

![image-20250105144148183](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105144148183.png)



### 1.2.2.规则离线开发和评估

![image-20250105144336656](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105144336656.png)

1. 人工制定规则
   * 现有风险识别再制定规则目标，基于专家经验
2. 量化制定规则
   * 先做出衍生变量，再基于数据分析进行规则筛选

**实际业务中两者结合使用。**



**量化规则开发流程：**

通常情况下变量开发会提前用，用以快速分析上线，需要提前规划。 ![image-20250105144608612](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105144608612.png)



### 1.2.3.规则上线验证和监控

![image-20250105144857828](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105144857828.png)

1. **规则上线：**制定好的规则发布到决策引擎
2. **规则验证：**验证上线规则的配置、**AB测试分流比例是否正确**；==**上线后规则命中率与线下测算时命中率的误差**==
3. **规则监控：**对规则命中率的稳定性按周期（日/月/周）持续监控，如出现异常需及时排查。
4. **规则调整：**对已上线规则进行贷后分析，根据表现调整规则阈值。



## 1.3.基于单变量生成规则

单变量制定一般步骤：

![image-20250105145848936](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105145848936.png)



### 1.3.1 变量初筛

![image-20250105145935142](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105145935142.png)

变量初筛主要是对变量进行描述性统计分析（**如平均值、最大值、最小值、标准差等**）以及缺失率、众数占比等指标计算，**对不符合要求的变量先进行一轮剔除，这样可以减少后面二轮筛选规则的压力**。



==变量初筛过程中，还要注意一下特殊值，规则可能需要单独考虑特殊值：==

可以先看接口文档，了解大致的特殊值。

再通过代码看实际的分布，比如通过toad.detector来看：可以看到唯一值，标准差，各分位点的值等（众数占比需要自己算）

* 空值占比（null，空字符串等），以及空值的含义
* -999或者999，以及这些特殊值的含义
* 最小最大值等



众数占比高可能会导致无法分箱，没有排序性（连续性变量）。

### 1.3.2 变量分箱

![image-20250105151937779](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105151937779.png)

 主要关注分箱的注意事项：

1. 必须包括变量所有值，不能丢失信息
2. 分箱数量不宜太多，一般再5-8之间
3. 每箱数量占比至少在5%以上，数量太少没有统计意义
4. 如果有缺失值，需要单独分一箱（缺失值可能也有单独的含义）



**分箱算法分类：**

![image-20250105152305072](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105152305072.png)

 

### 1.3.3 分箱统计量

**分箱后统计量（好坏客户占比与坏账率）：**

![image-20250105153843493](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105153843493.png)

主要是**边际占比**与**区间占比**：

* **边际占比**：**分箱下的XX数量** / **XX总数量**（纵向对比）
* **区间占比**：**分箱下的XX数量** / **分箱内总客户数**。一般只关注坏客户，也叫区间坏账率



### 1.3.4 分箱统计量含义

**分箱后统计量的含义：**

![image-20250105154435504](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105154435504.png)

一般来说，规则和模型都要求变量有明显的单调性，这样符合业务的可解释性。



### 1.3.5 WOE-公式和含义

![image-20250105154753073](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105154753073.png)

WOE公式：

$$WOE_i = ln(\frac{该分箱内边际坏客户占比}{该分箱内边际好客户占比}) = ln(该分箱内边际坏客户占比)-ln(该分箱内边际好客户占比)=ln(\frac{Bad_i}{Bad_T}/\frac{Good_i}{Good_T})=ln(\frac{Bad_i}{Bad_T})-ln(\frac{Good_i}{Good_T})$$



### 1.3.6 IV-公式和含义

![image-20250105155503924](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105155503924.png)

分箱内好坏客户边际占比越大，IV越高，说明变量好坏区分度越明显。

### 1.3.7 IV-使用标准

![image-20250105160451166](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105160451166.png)

规则和模型变量筛选时是一样的：除IV外，也要考虑变量间的相关性。相关性高的变量==**综合考虑IV、变量的坏账排序性（业务可解释性）、规则效果LIFT**==等，选择性保留变量。



### 1.3.8 IV-代码实现

![image-20250105161041598](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105161041598.png)

如果三方包不满足使用要求，也可以自己写一个IV计算函数，但**前提是分箱、WOE也要自己提前处理好**。



### 1.3.9 制定规则阈值

#### 1.3.9.1 规则效果-两个期望

1. 拒绝客户占总体客户的比例（命中率）不宜过高

   * 命中率高影响业务规模
   * 每个环节维度不同，对风险识别互为补充。每个环节做最有把我的事情。
   * 由以上两点，规则阈值一般会比较极端，要的实现效果就是**通过大部分客户，而只拒绝一少部分客户，单规则一般拒绝比例不超过5%**

2. 拒绝客户中，坏客户占比越高越好，同时好客户占比越低越好

   尽可能抓坏，并减少误杀

#### 1.3.9.2 规则效果-5各评估项

前三个是可量化的指标，后两个是业务解释性相关。

![image-20250105163116028](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105163116028.png)

1. 精准率

   由于实际情况中，坏样本浓度比较低，很难达到较高的精准率（bad_rate），一般通过LIFT来比较（bad_rate / 整体坏样本率；或者）

2. 召回率

   精准率和召回率是需要同时兼顾的：**希望在精准率达到要求的情况下，尽可能提升召回率**。如果某条规则精准率达到80%，但是只拒绝了0.1%的坏客户这条规则是需要再考虑的（特殊情况，比如极端的反欺诈规则需要视实际情况而定）。

   精准率和召回率两个指标是互斥的。这个与通过率和坏账率平衡类似。 

#### 1.3.9.3 规则阈值制定方法-IV分析法

分箱后，直接拒绝某一个分箱的客群。这个和分箱方法有很大的关系。**这种方法实际上是按照分箱来拒绝**。

![image-20250105164225433](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105164225433.png)

#### 1.3.9.4 规则阈值制定方法-极端值检测

![image-20250105164855081](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250105164855081.png)

极端值检测通过“**枚举分位数**”的方式，**枚举可能的极端值，作为备选的阈值**。

分位数，也称分位点：是概率的概念。即在一个集合内，小于这个值的所有样本的概率。比如，1%分位点，小于这个值的样本的个数为整体数量的1%。

正经定义：分位数指的就是连续分布函数中的一个点，这个点对应概率p。若概率0<p<1，随机变量X或它的概率分布的分位数Za，是指满足条件p(X≤Za)=α的实数 [1]。

**通常使用的分位点如下：**(toad.detector也有分位点，但是只包含1%和99%，没有那么细)

[0.005, 0.01, 0.02, 0.05, 0.95, 0.98, 0.99, 0.995]：小于0.5%、1%、2%、5%；大于95%、98%、99%、99.5%

[0.5%, 1%, 2%, 5%, 95%, 98%, 99%, 99.5%]



## 1.4.基于交叉表生成规则

### 1.4.1 交叉表介绍

 

1. 交叉表本质是变量的笛卡尔积。![image-20250108211618678](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108211618678.png)



2. 交叉表的复杂度介于单规则和评分卡模型之间。同时兼顾维度和复杂度两点。![image-20250108211813434](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108211813434.png)



3. 交叉表的前置条件

   * **基于IV筛选除预测效果好的变量池，从中选择交叉所需的变量组**。一般原则是：交叉变量最好是不同维度的，且相关性不高，这样综合效果最优
   * **对变量进行分箱操作，连续型变量需要有排序性。**有排序性才有直观的可解释性。离散型变量很多时，也可以分箱。
   * **总样本和坏样本数量足够多**。总样本数不变，两个变量交叉后，样本会被稀释到各个格子内。如果总样本和坏客户数数量不够的话，会导致样本充分性不足，无统计意义。

   ![image-20250108211955245](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108211955245.png)

   ![image-20250108212356902](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108212356902.png)



### 1.4.2 交叉表规则生成和评估

交叉表制定步骤：

1. 基于透视表统计坏客户数和总客户数
2. 基于坏客户数和总客户数统计量，计算出区间坏账率（badrate）和客户数占比
3. 基于格子的区间坏账率和客户占比制定规则

![image-20250108212714841](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108212714841.png)



**步骤一：**透视表

第一个透视表是坏客户数统计，第二个透视表是总客户数统计。使用pandas.crosstab+dataframe.pivot_table方法制作交叉表并统计数量；可以用seaborn热力图直观展示badrate

![image-20250108212950683](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108212950683.png)



**步骤二：**计算区间坏账率（badrate）和区间客户占比。

![image-20250108213130627](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108213130627.png)



**步骤三：**基于格子的区间坏账率和客户占比制定规则。（平衡通过率和逾期率） 。

评估精准率、召回率、通过率 

![image-20250108213244674](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108213244674.png)



应用场景：D类调优（收紧风险，但不太影响通过率）

![image-20250108213903570](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250108213903570.png)



### 1.4.3 如何寻找变量

分为离散型变量与连续型变量两类进行探索(**本质上还是根据IV和排序性挑选**，此外还要考虑变量间的相关性)

可以通过pandas自动判断类型来区分连续型和离散型变量，object一般来说都是离散型变量。可以用`DataFrame.select_dtypes(include=None, exclude=None)`挑选离散型变量。

toad对离散型变量也能分箱（默认，

1. 离散型变量
   * 剔除掉离散值过多的变量。做交叉表类别太多。
   * 观察各离散值的badrate，挑选出排序性较好的离散变量。
2. 连续型变量
   * 分箱后根据IV和排序性挑选。



## 1.5.基于决策树生成规则

### 1.5.1 什么是决策树

![image-20250120203056388](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120203056388.png)

### 1.5.2 决策树的生成过程

决策树一般生成过程，相当于通过特征变量对样本的特征空间做**非线性划分**，所以也说决策树是“**非线性**”模型。

![image-20250120203210868](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120203210868.png)

### 1.5.3 决策树算法

![image-20250120203513701](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120203513701.png)



### 1.5.4 CART决策树

![image-20250120203559848](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120203559848.png)

二分类中：p=1/2时（无法区分），基尼系数最大，此时效果最差。

### 1.5.5 CART分类树-基尼系数

![image-20250120204149378](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120204149378.png)  

  

![image-20250120205007624](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120205007624.png)

基尼指数：反映从数据集D中随机抽取两个样本，其类别标记不一致的概率。因此，Gini(D)越小，则数据集D的纯度越高。



### 1.5.6 CART分类树-变量二分法

连续型变量：

![image-20250120205212382](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120205212382.png)  



离散型变量：

![image-20250120205518066](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120205518066.png)



### 1.5.7 CART分类树-递归生成

![image-20250120205857518](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120205857518.png)

### 1.5.8 CART回归树-预测方式

![image-20250120210741848](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120210741848.png)

![image-20250120212201151](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120212201151.png)

与回归的度量标准也不同，类似损失函数。

回归树也有分类的思想（聚类）。相同类之间的目标变量值才会更接近，方差才会更小 。

* 分类树：使用基尼系数切分。
* 回归树：使用残差平方和（RSS）切分。

### 1.5.9 CART回归与分类树的预测方式

* 分类树：叶子节点中概率最大的类别作为当前节点的预测类别。
* 回归树：叶子节点中样本的y均值作为回归的预测值。



==CART决策树还有剪枝的过程，课程中不涉及需要另外看资料==

### 1.5.10 决策树规则生成与调参

**调参：（决策树及调参代码见[1.5.11](#s1)）**

1. **改变决策树算法本身的参数**。比如叶子节点样本数量（比例），树深度等等。比如**控制树深度，可以大致控制叶子节点是单规则（1层），二维交叉规则（2层）还是多维组合规则（多层）**。树深度不完全决定组合规则的数量，只决定上限（可能会提前分裂结束）。
2. **改变入模变量的组合**（python-combinations方法）。不同的入模变量组合（**不同子集的基尼系数不同**），决策树会有不同的分裂过程，得到不同的规则组合方式。



![image-20250120212705572](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120212705572.png)

**注意事项：**

* 过拟合：规则复杂可能在训练样本上效果好，OOT上效果差。
* 树深度：树深度过深可能会导致规则过于复杂，不利于上线后监控维护。==**一般规则包含的变量不超过三个**==
* ==**调参**==：

![image-20250120212857741](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120212857741.png)



### 1.5.11决策树Python代码

主要依靠sklearn的API。

sklearn只实现了ID3和C4.5，只实现了CART算法，并且是调优过的。（**暂不支持类别型特征**）

![image-20250120213121965](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120213121965.png)

![image-20250120213344758](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120213344758.png)

![image-20250120213450214](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250120213450214.png)

<a name="s1"></a>

通过调整入模变量组合，以及获得组合路径的代码，在这三节课中：

1. **基于单变量生成规则（2）：Python代码实操**。决策树可视化，以及展示参数调整。

2. **基于决策树生成规则(3)：自动化挖掘**。决策树分裂路径记录（组合规则）（深度优先遍历递归）

3. **并行规则集性能测试(2)：Python实操**。针对不同的入模变量组合，循环训练得到组合规则结果。这部分没有直接的代码，实际上是复用第二节课里的核心代码（决策树路径记录）。

   1. 主要代码如下（得到变量组合）：

      ![image-20250218215110743](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250218215110743.png)

   2. 对不同入模变量组合进行决策树训练

      在单组入模变量训练的基础上，套了个循环，把所有入模变量的组合都跑一边，最后把结果存到一起。核心函数还是第二个课里的**extract_tree_rules（）**方法。

      1. 变量r是所有变量的个数。
      2. 单变量规则，树的深度定为1，组合子集个数为2。**入模变量两两组合，得到单变量规则**。
      3. 多变量组合规则，树的深度定为2及以上，组合个数为所有变量个数（**如果选择将组合数减少，那么会多出非常多的组合，得到很多的组合变量**）。

      ![image-20250218215419551](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250218215419551.png)



## 1.6.规则泛化效果评估

OOT和训练集一般是在开始的时候就一起设计好，然后特征变量一次性全部加工好，提高效率。

**选取OOT的时候，最好还要考虑一下OOT与训练集时间段内，有没有做过规则的调整（可能会导致客群有差别）**。



### 1.6.1 样本选择的几个注意点：

* OOT时间窗口在训练集之后。
* OOT**一般选3个月以上**的样本，并按月分别评估（为满足统计意义上的样本数量最小要求）
* OOT需要和训练集一样，具有一定的贷后表现时间（**OOT在没有完全表现的情况下，建议最少也得有3个月的表现**）
* OOT的客群的风险水平与训练集相同（**部分原因：比如中间有过策略调整，有可能会出现OOT客群与训练集出现不同，可能会导致规则效果不稳定**）。简单衡量风险水平的方法：可以观察训练集和OOT的平均坏样本率和相同特征下的分箱分布情况。

![image-20250211210354463](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250211210354463.png)



![image-20250211210851777](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250211210851777.png)



### 1.6.2 评估指标

**逾期率评估指标：（训练集和OOT都可以看）**

* 命中率
* 精准率（precision，badrate）
* 召回率
* lift（一般来说希望lift在3以上）
* ==逾期率下降幅度（除绝对值外，还可以看相对值）==：（样本总的坏账率-规则通过后样本坏账率）/样本总坏账率



**指标浮动范围：**

1. 如果时间外样本上的指标在分析样本指标的一定范围内浮动，则说明泛化样本上效果打标，如果超出范围下降严重则说明不达标浮动范围一般不超过10%，严格的不超过5%。
2. 比如，分析样本lift为3，时间外样本lift为1，效果衰减较多（说明规则可能过拟合），需要重新调整规则；如果时间外样本lift为2.7-3.3之间，不超过10%的范围内波动，则说明规则的泛化能力达标。



**通过率评估：**

精准率，召回率，lift等指标需要有Y标签，导致通过率可能不太准确。**可以采用最新的样本来评估规则通过率影响，最新样本的命中率也可以和训练集和OOT上的命中率做对比，如果波动太大，需要考虑使用**。

![image-20250211211911379](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250211211911379.png)

## 1.7 规则集线下性能测试

规则集主要有三个指标：

1. 综合命中率

2. 整体坏账率（规则集命中的客户中的坏客户比例）（统计一个规则集整体命中的样本里的坏账率bad_rate，与样本平均坏账率一比可以得到规则集整体的lift。计算规则集整体的性能）

3. 相互覆盖率（规则与规则之间覆盖的程度，是**独立贡献**的指标。如果一个规则完全被其它规则覆盖，那么该规则在规则集中就没有存在价值了，统计**单一命中率**） 

   相互覆盖率要统计两个：（1）规则两两间的覆盖度；（2）去除多余规则后，统计每条规则单一命中率（如果是一条样本一行，先打上该条样本命中了几条规则的标签，再去按特征统计单一命中率。这个标签可以用于综合命中率统计，按照命中规则数量value_counts()，可以统计的更细致）。

   1. 一种简单的方法是，规则集中的所有规则，两两组合，观察命中结果的交叉情况，同时命中规则一与规则二的样本（交集部分），分别占仅命中规则一和规则二的样本比例（交集占两条规则各自的比例都要统计）。如果两个规则命中的样本完全一致，或者某一条规则命中的样本完全被另一条规则所覆盖，那么这条规则需要弃用。

      <img src="%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250224213157358.png" alt="image-20250224213157358" style="zoom:40%;" />

      实际案例如下：

      1. 绿色规则表名两条规则命中的样本一摸一样，保留一条即可。

      2. 规则0是规则1和规则5的组合规则，规则0是被规则1和规则5所覆盖的。

      <img src="%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250224213530024.png" alt="image-20250224213530024" style="zoom:80%;" />

![image-20250218203830100](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250218203830100.png)



![image-20250218204412075](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250218204412075.png)



如果要剔除规则1，那么规则1剔除后需要重新计算规则2和3的单一命中率（**先剔除无效规则，再统一计算单一命中率**）

![image-20250218204653685](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250218204653685.png)



规则命中打标代码：

```python
import pandas as pd

# 示例 DataFrame
data = {
    'A': [1, 2, 3, 4],
    'B': [4, 3, 2, 1],
    'C': [3, 2, 4, 1],
    'D': [1, 2, 3, 4]
}
df = pd.DataFrame(data)

# 定义标签函数
def add_flags(df, conditions):
    """
    为 DataFrame 添加标签
    :param df: 输入的 DataFrame
    :param conditions: 条件字典，格式为 {'flag_name': condition}
    :return: 添加了标签的 DataFrame
    """
    for flag_name, condition in conditions.items():
        df[flag_name] = condition(df).astype(int)  # 将布尔值转换为 0 或 1
    return df

# 定义条件
conditions = {
    'flag1': lambda df: (df['A'] >= 2) & (df['C'] >= 3),
    'flag2': lambda df: (df['C'] <= 3) & (df['D'] >= 1)
}

# 应用条件并添加标签
df = add_flags(df, conditions)

print(df)
```



## 1.8 策略调优

### 1.8.1 策略调优介绍和方法论

#### 1.8.1.1 策略调优介绍与调优方向

1. 策略调优介绍：![image-20250226213151974](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226213151974.png)

   一般来说，市场环境好的时候，策略比较激进，占用市场；市场环境不好的时候，主要靠存量客户，对新客做谨慎处理。![image-20250226213451063](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226213451063.png)



2. 策略调优方向

   两个核心指标：通过率、逾期率。

   两个调优方向：

   完美情况：降低逾期率的同时，提高通过率。

   * **A类调优（Ascending）**：提高通过率。从当前拒绝客户中寻找好客户。尽可能在逾期率不变的情况下，提高通过率。
   * **D类调优（Descending）**：降低逾期率。从策略通过的客户中寻找差的客户进行拒绝。尽可能在通过率不变的情况下，降低逾期率

![image-20250226213804968](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226213804968.png)



3. 策略调优步骤

   ![image-20250226214512067](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226214512067.png)

#### 1.8.1.2 A类调优的业务场景

![image-20250226214731914](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226214731914.png)

1. 资金充足有业绩压力

   资金充足时，现有通过率下的客户无法消耗完。一般发生在银行金融机构，有明确贷款规模的业务指标。（纯业务导向）

2. 策略过于保守

   在风险可控有很大盈利空间的情况下，可以适当提高通过率，让收益最大化。

   比如业务初期冷启动阶段，处于风险审慎考虑对于新客的通过率往往比较低，随着业务发展逐渐积累了一些贷后表现，如果发现风险非常低，说策略过于保守。

3. 监控报表通过率下降（日常遇到较多）

   通过监控报表发现，规则或模型命中率逐渐变高导致通过率下降。此时首先需要定位原因，然后进行相应调优，让通过率回到对应的水平。



**A调优方法论：**

![image-20250226215149011](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226215149011.png)

A类调优没有贷后表现，实际预测时需要借助一些量化方法或者AB测试，难度相对高一些。

A类调优可以分为宏观和微观两个层面：

1. **宏观调优（调整幅度较大）**

   客群下探。当一个客群风险稳定可控后，想要继续放大业务量，除本现有客群精细化策略调优外，还可以尝试对拒绝客群进行下探。下探客群由于风险更高，审批策略更严，且额度一般更低，定价更高。

2. **微观调优（调整幅度较小）**

   * **拒绝回捞**：从策略流中前面节点命中拒绝的客户中有条件的捞回好客户
   * **策略放松**：现有策略放松，比如规则cutoff的放松调整。
   * **策略下线**：对现有效果较差的策略进行下线处理
   * **策略替换：**用新的策略替换，需进行“置入置出”swap-in，swap-out评估新旧策略的效果。尽可能保证逾期率不变的情况下，通过率上升。



#### 1.8.1.3 D类调优的业务场景

![image-20250226215845089](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226215845089.png)

**D类调优业务场景**：

1. 监控发现逾期上升

   通过监控报表发现，逾期率有明显上升的趋势，需要及时定位原因，调整策略

2. 实际逾期率超过预期目标（与离线分析有偏差）

   **实际逾期率比离线分析时要高很多**，且超过了预期的目标值，需要调整成与目标一致

3. 放款头寸变少

   机构放款资金不足，优先给资质较好的客户

4. 市场环境下行控制风险敞口



![image-20250226220208453](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250226220208453.png)

D类调优也可以分为宏观和围观的两个层面

D类调优从通过客户中寻找相对较差的客户拒绝，因为客户有贷后表现，离线分析效果更准确，难度较A类调优相对小一些。

**D类调优**：

1. 宏观层面（调整幅度大）

   客群层面的收紧。许多机构是**以模型分层（融合模型的等级，比如A-F）为主导的策略体系**。当某分层的风险过高甚至击穿安全垫的时候，出于风险控制考虑可能会停止高风险客群的业务。比如原先有ABC三层客群，直接把C客群拒绝，或者C客群有条件通过（调整较大）

2. 围观调优

   * **策略收紧**：比如将策略cutoff收紧，通过率也会同时下降。
   * **策略替换**：用新策略替换旧策略，尽可能保持通过率不变的情况下，逾期率下降。也需要swap-in，swap-out
   * **策略新增**：在现有策略维持不变的情况下，新增加策略，以达到预期的目的，但通过率也会同时下降。

### 1.8.2 单变量规则的A类调优(1)：拒绝客户坏账预测 

#### 1.8.1 规则阈值放松

![image-20250310220316135](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310220316135.png)



#### 1.8.2.2 规则阈值放松的难点

A类调优的一个难点是：**被拒绝的客户无放款，没有贷后表现（风险未知），因此对于“是否可以放松”以及“放松程度”是难以量化分析的**。（贷前被拒绝的客户的好坏是难以判定的（坏客户的概率大，也有可能是好客户））。

![image-20250310220334769](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310220334769.png)



#### 1.8.3 拒绝样本贷后表现的量化方法

![image-20250310220738463](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310220738463.png)

常见的有3个方法可以参考：

1. **回归预测（通过规则本身的趋势预测）**：如果规则的通过样本分箱badrate有一定的单调性，可尝试基于通过样本的badrate拟合回归模型来预测拒绝样本分箱下的badrate。**该方法的使用条件是规则本身具备一定的区分能力，即规则本身badrate有单调趋势（规则本身排序性好）**
2. **其它强变量（根据其它独立变量预测）**：不依赖于规则通过样本badrate的单调排序性，而是借助其它的强变量来预测拒绝样本贷后表现，即规则通过样本的badrate没有明显的单调性，但不影响其它强变量的区分效果。在实际业务中，**一般这种强变量大多是模型分，或者融合模型分**
3. **实际测试**：如历史做过“灰度测试”或“AB测试”，可参考历史数据预估；如没有历史测试，可通过“随机测试”放行想要放松的客户，通过时间贷后表现来准确获取信息。

PS：对拒绝样本贷后表现进行预测本身是一个非常难的问题。如果有多种量化分析的方法，最好是多种方法结合起来使用（**即以上几种方法是可以同时使用的**），**综合多个维度分析**得到的结果，说服力就更强，预测值就更准确。



##### 1.8.3.1 回归预测方法（ 规则本身有较好的排序性）

大前提：**规则变量分箱后在通过样本上就有较好的排序性。**

![image-20250310221654066](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310221654066.png)

通过多项式拟合（可以用python也可以用excel）

python：numpy.polyfit()——最小二乘法进行多项式拟合。

![image-20250310221729627](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310221729627.png)

excel：趋势线拟合。

![image-20250310223220011](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250310223220011.png)



##### 1.8.3.2 其它强变量预测坏账率（一般是模型分）

​	当单变量的badrate单调性没那么强的时候，可以用其它强变量（风险排序能力比较强）预测拒绝样本的坏账率（一般是模型分）

![image-20250317212237602](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250317212237602.png)

通过模型分预测规则的坏账率，步骤（坐上图为规则1的分箱与badrate）：

1. 对**规则通过样本**进行模型分打分，分箱后计算每一箱的badrate（左下角小图）

2. 统计模型分对**规则拒绝样本的打分分布**。（==由于拒绝样本没有贷后表现，假设模型分在相同分箱下对通过和拒绝的样本的badrate一样==）。

   然后根据分箱下的数量和badrate求出拒绝样本的“坏客户数量”（右下角的小图）。通过模型分分箱，大致估计拒绝样本的badrate与坏样本数量。

   ==每箱坏客户数求和 / 该拒绝段总样本数 = 173/2000=8.65%==

   

##### 1.8.3.3 实际测试

![image-20250317213544209](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250317213544209.png)

1. 随机测试（**所有客户所有规则直接通过，通过这部分客户的贷后表现来预估**）

   * **分流比例**：比例不宜过高（一般控制在2%以内，另一本书上写0.5%~1%）。保证最小统计要求的情况下，避免随时过于严重（坏客户放太多导致坏账高）
   * **豁免**：所有客户直接通过。只打分不生效，直接通过审批，**且不会被决策流后面的策略拒绝**（如果是串行），否则贷后表现可能失真。
   * **优缺点**：信息准确，无需预测，有实际贷后表现，缺点是需要一定的观察周期，并且会产生一定的坏账损失（这部分的风险敞口需要提前计算好，判断对风险调优的价值）。

2. 如果历史有过“**AB测试**”或“**灰度测试**”，可以使用测试期间样本的贷后表现预估。

   AB测试和灰度测试的区别：AB测试是同时发生的，灰度测试的陪跑是先前的。

   * **AB测试**（**部分规则不生效直接通过，针对某条规则直接通过，比所有规则全部放行要少一些坏客户**）：如果某条规则上线时进行过AB测试。比如A组（对照组）的模型分全部只打分，不拒绝；B组（实验组）的打分并生效。从A组可以获取低于cutoff的客群的贷后表现（badrate），作为B组的近似估计。

   * **灰度测试（陪跑）**：如果规则策略上线前存在灰度测试，灰度期间只打分不生效，可以用来预估规则拒绝样本的badrate。灰度时间距今至少要有1个月以上的表现期（如果是观察首逾率指标，如果是观察dpd30+指标要更长的表现期），且灰度期间积累的样本量要满足统计数量的最小要求。

     （1）通过另一个特征在通过样本上的表现情况来预估拒绝样本的贷后表现。（比如中征分陪跑，得到各分分箱的badrate，然后根据拒绝样本的中征分估计badrate）。

     （2）同规则历史陪跑，可以根据通过样本获得各个分箱的badrate。用来预估拒绝样本的badrate。



### 1.8.3 单变量规则的A类调优(2)：效果测算

参考“**基于单变量规则的A类调优效果测算案例**”这个excel，通过预测拒绝分箱的badrae，拉出细分到每一箱变量的badrate、累计通过数量、累计通过率、通过率比例的提升幅度（放开这一箱后的通过率 - 之前的通过率）/之前的通过率、累计坏客户数量、坏账率（坏客户数 / 通过样本数）、坏客户比例的提升幅度。

1. 首先选取时间尽可能靠近现在的样本，选取一个提取分析样本的时间窗口

   包含两个部分：

   * 规则通过的样本，且有贷后表现
   * 规则拒绝的样本，无贷后表现（有变量的分布情况）

2. 通过单变量的badrate拟合后，预测拒绝分箱的badrate

   <img src="%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250331205730453.png" alt="image-20250331205730453" style="zoom:150%;" />

3. 调优后效果测算

   计算规则放松后分箱的坏客户数量，来统计通过率与坏账率。（红色为预测的坏账率，及各项指标）

   ![image-20250331205846890](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250331205846890.png)

   如何放松：

   * **通过率上涨幅度**：因为通过率和坏账率不是一个量纲，不能直接通过绝对值比较，可以根据**通过率和坏账率上涨的幅度**来做对比。
   * **单箱lift**：放松阈值的同时，还可以看单箱lift，一般来说放松后的单箱lift还是比较小，并结合通过率和坏账率上涨幅度，那么整体还是可以放松的。

   例子：比如上图中，第五箱放松后通过率提升幅度15.56%，坏账率上升10.71%，且单箱lift为1.79（可以简单的用badrate / 通过样本的坏账率，这样算出来lift偏高，因为放松后，整体badrate是升高的）；继续放松到第6箱时，通过率提升幅度与坏账率提升幅度比较接近了，且单箱lift变高了，不考虑继续放松。

   * **自己的想法**：可以估算一下放松后的这部分样本，带来的收益能否覆盖放松的样本带来损失的本金。

4. 放开后的处理

   可以先上线后做AB测试，观察贷后表现，随后再决定是否正式



### 1.8.4 并行规则集的A类调优（1）：理论介绍

#### 1.8.4.1 A类调优介绍与步骤

规则和模型的调优方法一样，本质都是策略的调优。

A类调优步骤：

1. 筛选单一命中率和单一命中纯度高的规则，放松后整体通过率提升较多。
2. 预估放松规则后，逾期率上升的程度，综合评估通过率与逾期率选择是否放松。
3. 放松后重新计算整体通过率（可能会有重复命中的情况），观察是否达到预期。如果没有，重复前两步（或者提前挑选好所有方案，全部计算后选择最好的方案）。

![image-20250407204303599](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407204303599.png)



#### 1.8.4.2 通过单一命中率筛选可调整规则

1. 并行的规则集，好处在于能获得所有数据，对于策略调优较为友好。

![image-20250407204709226](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407204709226.png)

2. 单一命中率、单一命中纯度概念

* 自然命中率：规则A的命中率
* 单一命中率：只有规则A命中，其它并行规则均未命中的数量占比
* **单一命中纯度**：**单一命中率/自然命中率**，反应单一命中的占比，其它占比未与剩余规则交叉命中的部分。

![image-20250407204929243](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407204929243.png)

3. 如何通过单一命中率筛选可调整的规则

   * 寻找连续型的弱规则，排除**强规则、政策性规则、以及非连续型规则（可调整空间不大）**
   * 对“**单一命中率、单一命中纯度**”**两者比例均较大**的进行优先筛选。**单一命中率降低多少会直接反应在整体的综合命中率上**。（大部分情况单一命中下降，整体命中会增加差不多的数值，单一命中纯度越高，放松后被其它命中的概率越低，那么整体命中率增加的越多。最极端的情况，整条规则下掉，整体通过率增加单一命中率的数值大小）。**单一命中率为该条规则调整后通过率增加的上限，单一命中纯度为规则调整后通过率增加的可能性**

   举例：RULE0与RULE7的单一命中率与单一命中纯度均较高，放松后整体命中率可能有较多的提升。

   ![image-20250407205859039](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407205859039.png)

   将RULE7单一命中率和纯度都较高，放松后，整体通过率提升值正好与规则命中率下降值相同。

   ![image-20250407210407214](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407210407214.png)

#### 1.8.4.3 通过逾期率筛选可调整规则

​	在放松阈值的同时，还需要评估规则放松后逾期率上升的程度，这个时候就需要预估**拒绝样本的坏账率**，综合评估通过率和坏账率情况判断是否放松这条规则。

​	个人想法：**如果放松了多条规则，可以简单的把所有规则放松后的坏样本直接加起来做统计**。因为尽可能挑选的都是单一命中纯度较高的规则，那么**不同规则放松后的样本存在重复的可能性也较低**，且直接累加也可以做逾期的保守估计。

![image-20250407210621082](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407210621082.png)



拒绝客户逾期率有两种情况可以判断：

1. 有历史拒绝数据

   曾经做过随机测试，随机分流一部分客户，所有规则直接通过，有完整贷后表现；规则上线前做过AB测试或者灰度测试，对于规则执行但决策不生效的样本（分流仅针对部分规则通过），筛选规则拒绝段的贷后表现。优先释放历史逾期率较低的规则。

2. 无历史拒绝数据

   * 做随机测试获取拒绝段贷后表现，但**需要一定的观察周期**，且要付出一定的逾期损失，一般比例较小，同时也需要内部评估是否需要做这个事情。
   * 基于**区间坏账率单调性**的性能判断，如果单调性较强说明规则区分效果较好，拒绝段逾期率大概率会按照单调趋势延续，可大致预估或者通过建回归模型量化方法预测逾期率，该种情况下拒绝样本的逾期率一般较高。因此，**优先选择单调性较差的规则释放拒绝段，往后延续的拒绝样本坏账率会稍微低一些**。

   一般来说，通过逾期率预测的方法，准确度要低于随机测试。

![image-20250407211020395](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407211020395.png)

举例：RULE0、RULE4的badrate单调性较好，预估拒绝样本的badrate较高；RULE7的badrate单调性较差，预估拒绝样本的badrate较低。

![image-20250407213023645](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407213023645.png)



#### 1.8.4.4 计算规则集性能再调整

​	当调整完规则后，重新计算整个规则的通过率的变化情况，因为不同规则会有重复命中的情况。

​	如果通过率没有达到预期，可以重新返回前两步调整，也可以提前列出所有备选方案，计算选择最好的组合。

![image-20250407213339465](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250407213339465.png)

### 1.8.5 决策流程上的A类调优：拒绝回捞

#### 1.8.5.1 拒绝回捞的概念

* 广义：广义上理解可以等同于A类调优，涵盖各类调优方法，即从被拒绝的客户中找出可准入的客户。

* 狭义：狭义上理解，是决策流程中的一个回捞动作，或者回捞节点，如下图。

![image-20250416205804958](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416205804958.png)

​	在决策流程中，不同节点中使用的数据有限，会有一点的误杀，从被拒绝的客户中，重新筛选客户。如上图，在被欺诈规则和信用规则拒绝的情况下，如果通过回捞规则，可以准入。



从另一个角度理解拒绝回捞（拒绝规则可以理解为挑出坏人，回捞规则可以理解为挑出好人）：

	1. 从规则的角度看，通过的客户中，好客户占大多数；拒绝的客户，我们认为坏客户占大多数。
	2. 在拒绝的客户中，再切一刀，筛选出一部分客户，这部分客户中绝大多数都是好客户，极小部分的客户是坏客户。

![image-20250416210346759](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416210346759.png)

#### 1.8.5.2 拒绝回捞策略的核心逻辑

​	拒绝回捞策略的核心逻辑：选取**明显的好客户特征**，并且**这些特征最好与前面已执行审批策略的数据维度相关性越小越好**，通过这些特征或者特征组合，从拒绝客户中进行捞回。

* 明显的好客户特征：

  **可以参考白名单的筛选规则**，比如，客户是公务员、事业单位或者500强集团企业员工；再比如客户公积金缴存基数大于xxx，等等。这些都属于明显的好客户特征，通过贷后表现分析也是如此，这类客户的风险很低。

* 为什么用明显的好客户特征：

  拒绝客户是因为命中某些规则而被拒绝的，说明了在某个维度上的风险是很高的。**如果想让其它维度风险高的客户通过，必须有非常强的特征维度来覆盖掉这个风险，或者抵消这个风险，才能被回捞通过**。

![image-20250416210718643](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416210718643.png)

#### 1.8.5.3 拒绝回捞策略规则设计

​	拒绝回捞策略设计上一般以**规则及规则的组合为主**（模型分也数据规则的范畴），根据规则区分效果的强弱、以及对通过率的影响综合考虑。

1. 如果想要**回捞的力度大**，提高更多的通过率，可以选择用**比较强的单一规则**进行回捞

​	比如前面被某些规则拒绝的客户，如果现在**命中了机构的内部白名单，则回捞通过**；反之则保持拒绝状态。这里的逻辑是我们更相信内部白名单的效用，更有说服力。

2. 如果想要回捞的更加精准，可以选择使用**多维度交叉的规则组合**

​	比如前面被某些规则拒绝的客户，如果现在命中了机构的白名单，并且基于三方数据源的融合模型分>700，则回捞通过；反之则保持拒绝状态。这种规则组合的形式对通过率提升不如商议中，但回捞更精准。

![image-20250416211856162](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416211856162.png)



​	**回捞的规则及规则组合不仅限于一种，可以从多个维度设置多条规则形成规则集**。可以是**串行或者并行**。下面是一个**并行回捞**规则集的示例（并行的好处是，可以看到每个规则的情况，方便未来调优）：

	1. **无差别回捞**：优质客户白名单、优质客户+推测收入较高，则直接回捞。这里需要注意一点，这里的白名单或者优质客户在决策流前面的节点中有没有使用过，如果前面使用过这些规则了，这里需要另外考虑。
	2. **有针对性的回捞**（三个案例）：
	 * 针对负债类规则的回捞：近2年有负债无逾期+违约成本高。（一般贷前会有负债类的规则，负债高的客户大概率会被拒掉，这里重新回捞。大部分情况下，负债高是由风险的，比如说负债高收入高、负债高但从未逾期）。
	 * 资金紧张评级低+模型分A>600：从多头和信用风险的角度去评估回捞。（对资金不是非常饥渴，且模型分比较高）
	 * **征信白户** + 模型分B>700：有些机构是不做征信白户客户的。但其它做下沉客户，比如消金等机构，会从征信白户中，结合一个非常强的**三方数据模型分**补充征信信息，再回捞一部分可能的好客户。（如果这个三方数据模型分排序性较好，可以尝试把高分客户回捞，阈值可以设置的相对严格一点）

![image-20250416212541861](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416212541861.png)



实际执行案例：

 	根据以往贷后表现，发现模型分大于等于800的客群，只有1.31%的badrate，可以尝试对征信白户切出>=800分进行回捞。

![image-20250416214739807](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416214739807.png)



#### 1.8.5.4 拒绝回捞策略流程设计

1. 确定不可回捞的对象，哪些拒绝客户是不可回捞的（**底线**）

   比如，政策准入、黑名单等硬性底线规则不允许回捞。

2. 确定需要回捞的对象，要对哪些拒绝客户进行回捞

   这个需要结合业务考虑，比如只对信用规则拒绝的客户回捞，也可以只对欺诈规则拒绝的客户回捞，或者同时回捞，不同的回捞对象对应的回捞节点位置不同。

![image-20250416215148878](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416215148878.png)



#### 1.8.5.5 拒绝回捞策略离线分析

1. **确定回捞变量**：通过数据分析和业务经验，**挖掘明显的好客户特征变量**，或者加工出有针对性的捞回变量，统称“用于回捞的变量”

2. **回溯回捞变量**：与历史样本数据对齐（包括通过、拒绝样本在策略上的决策数据，以及通过样本的Y标签）。回捞变量可能已经在历史样本中了，则不需要回溯。同时统计历史样本数据的逾期率，即大盘风险，作为后续回捞策略的参照。

3. **筛选回捞变量**：筛选各回捞变量下的客群，**分别统计其被审批策略规则拒绝的比例**，主要用于评估是否有回捞的空间。如果比例非常小说明回捞空间不大可以忽略，如果比例适中则可以考虑进行回捞。比如白名单中的大部分客户都会被审批规则拒绝，那么回捞的空间就比较小了。

4. **设计回捞策略**：根据步骤3分析结果初步设计回捞策略，代码执行回捞策略，并测算回捞效果，评估通过率、逾期率指标。

   4.1. 通过率比较好计算，主要看整体回捞策略的命中率，并且细致一点还会看回捞策略中每个规则的单一命中率情况。

   4.2. 逾期率的计算要分情况，如果是用已有贷后表现的变量做回捞，比如已有策略在用的模型分，那就不需要预估了，可以直接拿来用。如果用没有贷后表现的变量做回捞，那就面临着拒绝样本没有贷后表现的问题（如果变量不在策略中，可能还需要先回溯），如果有历史的测试结果，比如随机测试或者AB测试等，可作为参考来预估逾期率的水平。**一般情况下回捞客群逾期率和整体相比，要有明显低的又是，比如整体坏账bad rate是2%，那么回捞客群的bad rate最好控制在1.5%以下，否则捞回的和整体没有什么区别，也就失去做的意义了**。

5. **评估回捞效果**：最后根据评估指标，来调整回捞策略，重复步骤4。评估完后还要用近期样本再计算回捞策略的命中率，以评估策略的稳定性，因为历史样本和近期客群可能有一定的变化。

![image-20250416220052540](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416220052540.png)



#### 1.8.5.6 拒绝回捞策略上限和监控

1. 执行AB测试

   确定回捞策略以后，出于对风险审慎的原则，可以通过AB测试的方式上限，比如切出来20%的流量执行回捞策略，并打上标签，方便后续分析资产质量（实验组）。剩余80%的比例保持原有策略，不执行回捞（对照组）

2. 线上监控

   回捞客户可能有一定的风险，上线后要重点关注捞回资产的质量。

   * **上线初期**：资产还没有贷后表现。主要关注捞回人群占比的稳定性，是否与离线分析时保持一致。并且如果出现某一天捞回量突然上升的情况，也需要立即排查原因。**毕竟捞回量越高，风险就一般会越高，这是一个预警信号**。
   * **上线中期**：当资产开始具备短期贷后表现后，如首逾率FPD7/15/30+，那么就可以比较捞回的资产与大盘的风险差异。如果捞回资产风险与大盘接近或者要高，考虑下架处理。如果捞回资产风险较低，有明显优势，那么可以逐步放大流量比例，稳定后切到全量。
   * **上线后期**：随着贷后表现丰富，可进一步分析DPD30+term3/4/5等风险暴露更充分的指标衡量风险。稳定后可全面上线。另外持续监控回捞命中率的情况，对于单一命中率为0或者失效的规则进行再迭代优化。

![image-20250416222931388](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250416222931388.png)



### 1.8.6 客群对象上的A类调优：客群下探

#### 1.8.6.1 客群下探概念

​	**客群下探**相比具体策略规则的微调，客群的调整属于更宏观层面，**策略规则调整好比‘战术调整“，而客群调整好比”战略调整“。**客群下探的过程中，除了风控策略本身，还需要业务、产品、开发等一起联动配合，涉及到的部门更多，考虑因素更多。

​	主要应用场景：在业务冷启动的过程中，出于审慎考虑，通过率普遍较低。随着业务发展积累了一定的贷后表现后，如果客群风险可控且安全垫较高，说明此时风控策略偏保守。在公司业务做的偏保守的时候，都有空间做客群下探。

![image-20250421212134540](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421212134540.png)



客群下探意义：

* **市场端角度**：尽量留住自己的资产，避免资源浪费，留住护城河。自己不留住，其它同业竞品也会去做。

* **资产端角度**：丰富公司资产结构，多业务并行发展。做出更多差异化的产品，避免内卷。

* **风控端角度**：可以大幅提升授信审批通过率，但同时大盘风险也会提升，所以一般下探客群的策略设计上更严苛，且产品上也会控制风险。

以上均从**收益最大化角度**来说。理论上只要有有盈利空间，且满足监管要求，就可以一直下探，直到边际效应递减，再考虑收紧。

![image-20250421212654626](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421212654626.png)



#### 1.8.6.2 客群下探实现方式

​	大多数企业的贷前策略体系属于**“模型为主，策略为辅”**的，即通过模型输出的风险等级对风险分层，并以此为基础实现额度和定价的差异化指定，所以客群下探的一种有效方式就是**“下探模型分层的风险等级”**。

​	模型为主的体系，对模型的精准度要求较高。为了保证模型效果持续的好，需要不停的优化。

​	这种下探的好处是，下探一个等级后，通过率会上升的比较快，同时逾期率也会有所升高，需要关注贷后的逾期情况。

![image-20250421213236797](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421213236797.png)

#### 1.8.6.3 客群下探节奏

​	阶梯式下探，在模型分层分后，再单独增设一些审批规则，实现有条件地通过（相当于从高风险客群中筛选更优质地客户通过）。这种下探就比较丝滑，没有一步到位，类似阶梯式的逐步下探。

​	**核心思想和业务初期通过白名单做业务冷启动是一个道理，待有了一定贷后表现以后再根据实际情况决定是否下探，整体下探节奏是阶梯式逐步开展的，便于控制整体风险。**

​	以上只是下探的一种方式，具体还需要结合业务需求进行调整。

​	此外，除了风控策略放松外，**还包含了产品要素上的设计，比如说下探初期对额度和还款期限进行控制，等有了具体表现之后，比如逾期、支用率，再根据情况进行调整**。

​	比如上线后发现支用率比较低，那么可能会调整额度盖帽（提额）或差异化定价（高价客群降价）。

![image-20250421214145320](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421214145320.png)



#### 1.8.6.4 客群下探效果测算

​	通过率、逾期率测算。

*  一般来说，使用近期样本测算的通过率普遍比较准确且简单

* 逾期率测算的难度比较大，如果有随机测试和ab测试，可进行参考；如果没有，建议参考公司已有的类似产品，或者去市场调研**同类额度定价产品的逾期表现**，再已有结合通过客户的贷后表现按风险等级区间坏账的排序性做线性测试，综合来预估逾期率。（这是一个没有把握的事儿，信息越全，角度越广，结果越准确）

![image-20250421215019143](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421215019143.png)



​	业务测算：业务规模、收益。

​	预估下探后，每个月新增的放款规模大概有多少。月均申请客户数量可通过历史预估，用信转化率可根据经验或者参考公司同类产品、行业同类产品，件均额度（授信额度）需要乘上一个额度系数，客户不一定会全部提款。

$每月新增放款规则=C等级月均申请客户数量\times用信转化率\times件均额度\times额度系数$



![image-20250421215631420](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421215631420.png)



#### 1.8.6.5 客群下探风险预警和处置

​	客群下探属于战略上的调整，除了策略调整和基本测算外，还需要做好风险监测和预警

​	上线后，如果实际风险比预期风险要高，如何做应对的措施。从风险管理角度来看，一般需要提前制定2各风险线，一个是预警线，一个是拉闸线：

* **拉闸线**：风险底线，坚决不能逾越，超过了就直接停业务。

* **预警线**：在即将达到拉闸线之前打一个提前量，提前预警，预警触发后查找原因进行调整，避免业务恶化后停掉。

  **预警时机也需要结合业务情况具体来制定，可以评估业务风险的滞后程度**。比如先息后本，预警线可以多靠前一点；等额本息的，预警线可以稍微宽松一些。

![image-20250421220316789](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421220316789.png)

#### 1.8.6.6 客群下探的产品设计

**从产品要素设计角度控制风险的几点原则**：

1. 风险越高，额度越低。从资金方的角度来看，推送的客户额度越高，风险普遍也较低。
2. 风险越高，定价越高。利润空间主要集中在下沉客户，虽然优质客群风险低，但是规模和定价都不会太高。
3. 风险越高，还款期限越低。
4. 风险越高，资金占用越低。一般来说低风险客户，可以选择先息后本，也可以选择等额本息；高风险客户，一般选择等额本息。

![image-20250421220915322](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421220915322.png)

​	实际案例：

![image-20250421221547520](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421221547520.png)



​	客群下探过程中，产品角度上的其它考虑：从产品上控制是一把双刃剑。如果额度偏低，定价偏高，有可能导致授信通过率提高，但是用信转化率偏低，业务整体规模还是没打开。

​	**调整用信通过率最直接的方法是，调整额度和定价**，通过AB测试来做客户激活率上的优化。

​	一般经验而言，**风险低的优质客群更关心定价**，因为额度上给的都差不多，比的是定价的优惠政策；而**对于下沉客群而言，对于定价反而不敏感，更关心额度多少**，各家定价给的都差不多，此时额度的需求更多一些。

![image-20250421221719096](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250421221719096.png)

# 2.定额定价

## 2.1定额策略

### 2.1.1定额策略概述与目标

* 授信额度：金融机构为借款人提供的最大贷款金额，是客户获得的一种权益额度。
* 借款额度：是指借款人在金融机构给予的最大贷款金额范围内，实际借贷的金额。

从产品角度看，一般消费分期类的信贷产品授信额度等同于借款额度，而对于**信用卡分期及循环贷现金贷产品**，是需要区分授信额度和借款额度的，两类产品在风控流程中也会体现出差异化。

1. 前者通常来说依附于某种业务场景，比如京东商城买某个产品，使用了分期，那么这一笔的授信就等同于借款额度。个人理解为通常意义下的单笔单批。
2. 信用卡类，现金贷类的，一般是循环额度，额度下可多次提款。

![image-20250427210347326](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250427210347326.png)



​	额度策略好坏会直接影响客户的**动支情况、预期情况、以及收益情况**。

1. **动支情况**：如果额度过低，没达到客户的预期，客户可能不会使用额度，则不产生收益。

2. **逾期情况**：如果额度过高，超过客户还款能力，客户如过度使用则可能导致逾期。

3. **收益情况**：动支比例低会影响业务规模，导致利息收入提升小；逾期风险高会导致坏账损失多，导致收益缩水。

   授信额度在影响动支和逾期上，是比较矛盾的两点，不宜过高也不宜过低，需要**达到一个平衡来达到收益最大化**。**额度策略的主要目的就是收益最大化**。

![image-20250427211326772](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250427211326772.png)



### 2.1.2定额策略-两种场景描述

**一、分期贷款场景（单笔单批）**

$损失率=\frac{坏账总金额}{放款总金额}=(\frac{坏账户数}{总账户数})\times(\frac{坏客户平均坏账金额}{所有客户平均放款金额})$

损失率可以按下图中公式分解成两个部分（上面的公式换了几个用词。个人理解，账户数实际是**客户数**，正好与策略模型开发的客户维度对应），如果左边：

1. 左边的**户数损失率**：可以通过贷前规则与贷前模型来控制（开发时以客户维度）。
2. 右边的**贷款额控制比**：从分子的角度看，如果认为坏客户是不还款的话，额度给的过高，那么坏账金额过高，**会拉高平均坏账金额**，损失率整体变大；从分母的角度看，如果额度给的偏低，那么具备还款能力的好客户的借款金额偏小，**会拉低平均放款金额**，导致分母变小，损失率整体变大。

**贷款额控制比**的公式分子分母，正好与**逾期率**、**动支情况**对应。

对于单笔单批业务来说：**额度策略的衡量指标**就是$\frac{坏客户平均坏账金额}{所有客户平均放款金额}$

![image-20250427212011388](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250427212011388.png)



**二、循环贷款场景**

此时放款金额 <= 授信金额

$损失率=\frac{坏账总金额}{放款总金额}=(\frac{坏客户数}{总客户数})\times\left \{ (\frac{坏客户平均限额}{所有客户平均限额})\times(\frac{坏客户额度使用率}{所有客户平均额度使用率}) \right \} $

下图公式可以拆解为三个部分（限额就是授信额度）：

1. **户数损失率**：授信模型策略控制。

2. **限额控制比**：坏客户平均授信额度越高，分子越大，损失越大；好客户平均授信额度越小，分母越小，损失越大。

3. **额度使用率**：一般情况下，坏客户的额度使用率高，分子较大，损失大；好客户的额度使用率较低，分母较小，损失大。

   这里的额度使用率有两种情况：一种是欺诈嫌疑，奔着薅羊毛借了不还的；另一种是偿还能力有限的客户，这种客户在其它金融机构可能也有借款，对资金的饥渴程度较高。

   从分子的角度看，额度越高，坏账使用率越高，导致损失越大；从分母的角度看，额度越低，好客户的支用意愿减少，分母越小，导致损失越大。（**尽可能拉起好客户的动支意愿，以及提高好客户的授信额度，降低坏客户的授信额度**）。

![image-20250427214844754](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250427214844754.png)

对于循环贷款场景来说：额度策略的衡量指标有两个，**限额控制比**和**额度使用率**。



**三、额度策略总结与个人理解**

1. 个人理解的额度策略：**尽可能拉起好客户的动支意愿，以及提高好客户的授信额度，降低坏客户的授信额度**。但实际又是下沉客户的利润空间较大，坏客户的额度也不能给太低，需要寻找一个**平衡点**。

2. 与1.8.6.6中客群下探的产品设计思路有异曲同工之处（**高风险低额度，高风险高定价；低风险高额度，低风险低定价**）。且一般来说，好人更关心定价（各家机构给的额度都差不多）；坏人更关心额度（各家给的定价差不多）。个人觉得也可以这么理解，**额度策略更偏向于为坏客户定制**。



**四、额度策略的难点**

1. 策略制定依赖专家经验

   量化方法较少，很多机构还是以来专家经验。

2. 数据维度

   **经济水平、资金需求**等方面缺少准确的数据维度来衡量。

3. 验证额度的准确性需要较长的时间

   线上验证需要较长时间的贷后表现进行观察判断。

4. 额度策略的评估方法缺少依据

   额度效果评估的方法较少。

![image-20250427223905047](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250427223905047.png)

### 2.1.3 定额策略-数据维度

​	项目冷启动初期，可能简单粗暴，所有客户一个维度。等业务运行一段时间后，有数据积累后，可以定制化定额。

​	定额主要依靠三个数据维度；

* 风险
* 收入
* 需求

![image-20250526192636653](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526192636653.png)



**一、风险维度**

​	损失公式： $EL=PD\times EAD\times LGD$

* 日常的风控模型就是PD模型。
* EAD（风险敞口）就是额度（或者说余额）
* LGD（违约损失率）：可能损失的金额占风险敞口的比例（违约不一定全部损失，比如有催回、或者资产可抵押、质押的）

随着风险的上升，应给予的额度应该要变低。

![image-20250526192758382](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526192758382.png)



**风险数据类型：**

* 模型分：A卡、征信模型分、三方数据源
* 强变量：征信查询多头、三方多头共债、历史逾期数据

![image-20250526193229754](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526193229754.png)

额度策略与审批策略的应用差异：

* 审批策略的模型分：要求尾部有区分度，用于抓坏
* 额度策略模型分：更关注“排序性”，不一定要求尾部区分度强，但整体要有明显过度的排序性，因为额度模型是面向所有通过客户，在每个风险分层下制定相应额度。



**二、收入负债维度（还款能力）**

**收入、负债数据能反映出借款人偿还债务的能力。**光看收入，可能收入高，负债也高，导致偿还能力弱，需要两者结合。

1. **收入数据**

   * **强相关：**社保、公积金、信用卡额度（他行额度）、房贷、固定资产、月消费金额、工资流水（一般是线下提供，比如房贷）、模型预测（依靠弱相关数据构建模型，形成强相关数据）、外部数据
   * **弱相关：**年龄、学历、职业、城市、是否有车、手机品牌、手机价格、地址稳定性。（通过客户画像分析弱相关数据和收入的关系）

   有强相关的数据时，也需要弱相关的数据，因为评估收入是比较困难的，需要从不同维度叠加起来评估。

2. **负债数据**

   * 征信数据（每个月未结清应还款金额，按不同类型区分）
   * 外部共债数据

   一般以征信为主，征信报告的数据相对来说比较准确。

![image-20250526193640707](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526193640707.png)



**三、需求维度**

需求与额度的关系：

​	**一般来说，没有借款需求的客户的授信额度要高于有需求客户的授信额度。**这一对比也可以反映在给客户授信后是否动支的表现上，或者是否用满额度上。一般来说，用满额度的客群风险是要高于未用满额度的客群。同时还需要考虑到，没有需求的客户可能是因为额度不够等原因未发起支用，因此提额，也可以起到“促动支”的作用，即促使授信到用信的转化率提升。

需求数据包含：

* 埋点数据：自家app的一些行为数据
* 营销响应模型分
* 动支模型分（比如，授信后是否在七天内发起动支等）
* 征信查询数据
* 外部借贷行为和意向等相关数据

![image-20250526194457652](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526194457652.png)



### 2.1.4 定额策略-收入测算

1. **通过社保推算收入**

   缴纳比例在不同地域，可能有不同的值。医疗、失业保险也可按照比例计算，作为交叉验证手段。

   按照以上公式推算的收入可能会出现一些失真的情况。

   * 一种是工资超过了当地最高缴纳基数
   * 另一种，部分公司按最低标准缴纳，或者不全额缴纳，则收入推算偏低。可以加一个判断逻辑，**先判断实际缴纳额是否超过了工作当地的最低标准缴纳额，如果超过了，则说明推算出的收入不是按照最低标准缴纳的，那大概率就是按照真实工资缴纳，此时推算结果更加准确。**

![image-20250526204241766](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526204241766.png)

![image-20250526204705648](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526204705648.png)



2. **通过公积金推算收入**

缴存基数、缴存比例，在不同城市都不一样，而且每年会变化。如果做跨区域的信贷业务，涉及多个城市省份的，需要梳理出不同城市最新的关于缴存基数、缴存比例的映射表，一次来准确判断。

![image-20250526205342900](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526205342900.png)



3. 通过房贷推算月收入

   ​	房贷推算收入的逻辑是：如果借款人一直按期还房贷（月供）且未出现逾期，则代表该借款人截至目前的收入水平是至少可以覆盖月供的。

   ​	一般来说，月收入的**20%以下**还月供会相对轻松；**20%~50%**之间属于一般水平；而**50%以上**甚至更高压力更大。大部分人会在月供和生活质量之间进行平衡，所以在借款人当前未逾期的情况下，可以按照**30%~40%**的平均水平作为房贷系数来进行推算。

![image-20250526205929136](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526205929136.png)

​	如果无法获取征信报告，但是有相关房产信息，比如说房产价格，也可以进行推算。通过房产价值乘上一个系数，来大致估计收入。

![image-20250526210409445](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526210409445.png)

4. 通过信用卡额度推算收入

   **信用卡额度 = 月可支配收入 / 最低还款比例（最低还款比例一般是10%），这样可以保证月可支配收入至少够还信用卡欠款的最低还款**。

   ​	通过假设可支配收入占工资的比例，根据信用卡额度来倒推收入。

![image-20250526210651798](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526210651798.png)



5. 有效月收入

   ​	前面推算的收入不一定有效，以公积金为例，借款人近几个月的公积金如果断缴，那么即便基于缴存基数和比例推算出的收入，是无法代表借款人真实状态的，因为断缴很可能说明客户还款能力已经出现了问题。因此，**在推测收入前增加一些限制条件，如果满足了条件再进行收入推算，这时的收入就叫“有效月收入”。**

![image-20250526211238134](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526211238134.png)



* **基于公积金的有效月收入**有下面几个，是且的关系，**有一个不满足就不进行推算**。

![image-20250526211635126](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526211635126.png)



* **基于房贷的有效月收入**：贷款状态得是正常的，不然月收入就是非有效的，这个是硬性条件。

  ​	贷款进度方面，块结清的借款人，风险肯定比刚开始还贷款的借款人低；通过总还款金额（本息总和）与本金的比例可以间接推算出贷款利率，而贷款利率可以**间接让我们知道客户的风险级别**，比如房贷利率不到4%，那一定是优质客户，而利率8%以上的客户信用风险肯定比上一个要高。**可以根据这些软条件设定差异化的有效月收入，比如在推算公式前加一个惩罚系数。**

![image-20250526211937292](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526211937292.png)



* **基于信用卡额度的有效月收入：**贷款状态、使用状态、使用长短（开卡时间太短，评估收入可能不准确）、异常剔除（过高，过低的额度剔除）均为硬性条件，否则推算的收入可能会失真。

  与房贷相同，可以通过额度使用率、多头情况等软条件设置相关的惩罚系数，最终确定有效月收入。

![image-20250526212859715](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250526212859715.png)



### 2.1.5 定额策略-各发展阶段的定额策略

定额策略一定是越来越精细化，差异化。

核心目的：业务逻辑上是自洽的，能满足业务要求，每家可能都有一些差异。

1. 业务冷启动：单一额度策略（所有的客户同一个额度）、专家经验策略。
2. 业务发展期：单维度定额策略（仅根据评分等级定额）、二维额度矩阵策略（根据收入+评分等级）、多维决策树定额策略。这种方式，解释性较强，但缺乏有效的评估手段且评估周期长。
3. 业务成熟期：最优额度模型（根据收益最大化原则来对客群定额）、机器学习模型（比如KNN聚类授予额度）。额度更精准，但实现有难度（部署复杂），可解释性弱。

虽然很多企业都已经到业务后期了，但大多数都还是用第二种方式定额。

![image-20250604212235961](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604212235961.png)



### 2.1.6 定额策略-额度矩阵设计

1. 额度矩阵设计流程
   * **确定额度范围**：根据产品属性确定额度的上下限，即“盖帽拖底额度”。
   * **确定主维度**：主维度主要用来确定基础额度，对于维度各自上的区分性要求非常高，所以主维度选择要谨慎，决定了额度的大方向。比如从风险维度看，有贷前A卡；从经济维度看，可以用社保、公积金、房贷、他行卡额度等。
   * **确定调整系数**：调整系数用来对基础额度进行修正，可以使用其它维度的**弱相关变量**。比如客户属性，学历、所属机构等级（大企业还是小企业）；住址或联系方式稳定性；多头风险指数；外部数据源的分数产品等等。弱相关变量也需要有一定的排序性，可以向上调整，也可以向下调整。
   * **计算基础额度**：可以根据不同风险等级设置客群的盖帽拖底额度。比如产品上限20万，A卡B为10万，C为5万，超过上限的以上限为准，没超过上限的以计算值为准。
   * **计算最终额度：**根据产品额度上下限、基础额度、额度调整系数计算出最终授信额度。

![image-20250604213410202](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604213410202.png)



2. 额度矩阵设计要点-矩阵思维

   在所有的关键步骤中，都可以使用矩阵设计。比方说主维度也可以通过两个维度来生成一个新的主维度；基础额度，用多个维度来确定；调整系数也可以通过两个维度来进行矩阵设计，等等。

![image-20250604214826971](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604214826971.png)



3. 额度矩阵设计要点-阶梯式分布

交叉融合的维度需要有一定的排序性，即有一定的业务解释性。因此，两个维度交叉后会天然行程阶梯式的分布规律。矩阵中的每个元素值的制定，可根据产品政策和业务理解灵活设计。比如基础额度，靠业务经验拍出来的，最后设计完之后，看下额度的分布情况，是否符合我们对额度的预期目标（比如额度最大值，最小值，件均等）。

![image-20250604215606623](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604215606623.png)

4. 额度矩阵设计要点-托底盖帽

![image-20250604215850273](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604215850273.png)



4. 额度矩阵设计框架——**风控主维度差异化盖帽，收入维度推算基础额度**

   （仅参考思路，中间每个环节都可以灵活调整）

   **综合月收入取最大值，趋向于尽量给客户更多的额度**；也可以取最小值等。

   这里计算最终额度是，根据综合月收入放大后与盖帽托底额度做对比得到的。

![image-20250604220232540](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604220232540.png)



5. 额度矩阵设计框架——**风控、偿债主维度差异化定额，客户等级、学历差异化额度系数**

   理论上每个环节都可以做矩阵的差异化。

   和上一个框架的区别主要在于基础额度的生成方式不同。上一个基础额度根据月收入生成，有较多取值，这一种方式的基础额度数量比较少，结合系数，额度种类就只有固定的几种；第二个区别是，盖帽额度有无差异化。

![image-20250604221711767](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604221711767.png)



6. 额度矩阵设计框架——**风控、偿债主维度差异化定额，客户等级、学历差异化额度系数，按条件设置差异化盖帽额度**

   这里与上一种的差异在于，盖帽托底额度，根据设置的条件（并不是主维度）进行差异化。这种方式在后续评估额度策略有效性时，会比较花时间。

![image-20250604222619583](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250604222619583.png)

###  2.1.7 定额策略-效果评估

**一、额度策略的难点**

![image-20250609205805801](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609205805801.png)

​	有借款需求的客户在发起申请时，有自己的心里预期，金融机构一般无从知晓。对于金融机构而言，在贷前有两方面要判断：

* 一是能否给客户借款
* 二是能借多少，而**第二点能借多少（额度策略）是建立在第一点确定能借的条件之上的**。

**额度，其实是链接“客户风险”和“客户的借款需求”两个方面。**这就导致了额度策略时比较难做的，因为多重因素影响增加了量化分析的复杂性。![image-20250609205824448](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609205824448.png)



1. 借款需求

   额度过低无法满足客户需求时，可能会减少对客户的吸引力，导致用信转换率低，影响整体业务的放款规模。

2. 额度高可以一定程度提高用信转换，但过高的额度会导致“**风险敞口过大，坏账损失放大**”。这就涉及到**”逆向选择“**的问题。

   **”优质客户取所需，风险客户取所有“**，一般好客户没有借款需求时，授信再多额度也不会被支用，多余的额度就会浪费；而对于坏客户，借款需求强烈且风险较高，又不能给太高的额度，一旦额度过高则可能造成坏账损失。

![image-20250609210429398](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609210429398.png)



**二、从风险损失角度评估额度策略**

![image-20250609210955112](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609210955112.png)



1. 从风险角度评估额度策略的作用

   单笔单批场景下，坏客户得到的额度越高损失率越大（分子平均坏账额越大）；好客户得到的额度越低（分母平均贷款额越小），损失率越大。

![image-20250609211006351](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609211006351.png)

2. 具体的几种评估方法
   * **额度有效系数**：**金额逾期率 ** or **额度逾期率**与**户数逾期率**的比值大于1，认为额度策略无效；小于1，认为额度策略有效。
     * 从上图公式看：额度有效系数=左边 / 右边，即平均坏账额 / 平均贷款额，说明平均坏账要小于平均金额水平
     * 从业务角度看：额度有效系数小于1，**说明额度策略给坏客户的额度，相比给好客户额度要少**。
   * **额度风险区分能力：**风险排序性 or KS。额度分箱统计区间坏账率，或者计算KS；这里主要关注整体排序性，而非常规策略，只关注抓坏能力。

![image-20250609211320230](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609211320230.png)



**三、额度有效系数评估额度策略**

![image-20250609212401703](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609212401703.png)



1. **额度逾期率 / 户数逾期率**

   ​	额度逾期率 = 逾期额度 / 总授信额度（**有发生支用的**）

   ​	额度逾期率，指客户发生逾期时，**不考虑实际的逾期金额时多少，均按照授信额度全部逾期看待**。

   这种评估方法，**单纯的从额度本身出发衡量额度给损失带来的影响，忽略其它干扰因素，计算简单易于理解**。

   额度有效系数大于1时，说明额度失效，很可能是**给了坏客户更多的额度**。

   | 额度有效系数 | 额度策略有效程度 |
   | :----------: | :--------------: |
   |     <0.6     |     非常有效     |
   |  [0.6, 0.8)  |     比较有效     |
   |  [0.8, 0.9)  |     一般有效     |
   |  [0.9, 1.0)  |     略微有效     |
   |      >1      |       失效       |

![image-20250609212438417](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609212438417.png)

额度逾期率示例（这里先忽略用信转换率的影响，假设授信金额全部支用）：

​	额度策略1的金额逾期率最小，额度有效系数最小，说明通过控制额度对好坏客户进行区分（给予坏客户更少的额度——风险客户取所有），减少了**“金额上的真实损失”**，起到减少损失的效果。

![image-20250609214250730](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609214250730.png)



2. **金额逾期率 / 户数逾期率**

   ​	金额逾期率 = 实际逾期金额 / 总放款金额

   ​	金额逾期率，指客户发生逾期时，**实际的逾期金额是多少，那么金额逾期率的分子就是多少**。

   **该评估方法，使用了最终实际损失的金额，因此额度除了与风险相关，还与客户的借款和还款行为表现相关。**

   | 额度有效系数 | 额度策略有效程度 |
   | :----------: | :--------------: |
   |     <0.6     |     非常有效     |
   |  [0.6, 0.8)  |     比较有效     |
   |  [0.8, 0.9)  |     一般有效     |
   |  [0.9, 1.0)  |     略微有效     |
   |      >1      |       失效       |

![image-20250609215053022](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609215053022.png)



3. 额度逾期率与金额逾期率的区别

* **金额逾期率**：使用实际放款金额之和作为分母，实际逾期金额之和作为分子，可以反映真实的损失率。但对于授信额度来说，**金额逾期率额外增加了“支用比例”和“逾期比例”两层转化**，增加了其它影响因素（如催收或其它业务影响手段），**不能直观反映“额度和逾期”或者说“额度和风险”之间的关系。**

  $金额逾期率=\frac{额度\times支用率\times逾期比例}{额度\times支用率}$

* **额度逾期率：**使用授信额度（**有发生支用的**）之和作为分母，逾期的授信额度之和作为分子，排除其它影响因素，可以直观反映**”额度和逾期“**之间的关系，但无法反映真实损失率。或者说额度逾期率近似反映的是最差的情况，授信额度全部提取，全部逾期。

* 额度逾期率相比金额逾期率，计算结果值会相对更高，更严格。

* 单笔单批场景下，额度逾期率和金额逾期率的分母一样。

![image-20250609215335826](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609215335826.png)

金额逾期率和额度逾期率的选择：

* **金额逾期率**：由于客户的差异化还款行为，不同还款方式的逾期，会导致实际逾期金额有差异。**会导致金额逾期率的结果可能是好的，可能是坏的。**（比如授信全部提现后，从不同期次开始逾期）。（**这里需要配合当前逾期Y标签使用，因为要获取实际的逾期金额）**
* **额度逾期率：**额度逾期率认为既然借款人发生了逾期（假定审批策略没有误放，额度策略建立在确定放款的基础上），在审批策略无误的情况下，说明给该借款人的额度可能过高，超过了他的还款能力导致了逾期。**所以无论还款了多少期，只要逾期就说明了不合理。（这里可以配合历史最大逾期天数的Y标签）。**
* 两种方式在业内均有不同程度的使用，**对于评估额度有效性来说，额度逾期率相对更加客观。**（排除了其它因素）

![image-20250609221112554](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609221112554.png)

**四、风险排序性评估额度策略**

![image-20250609222811819](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609222811819.png)

1.  **额度模型的排序性**

   类似审批规则，通过户数逾期率的口径，分析额度的**排序性**。核心思想：**通过风险维度制定额度时，客户风险越高，授予的额度应该越少，控制风险敞口以减少金额损失。因此按额度分层观察排序性时，也是遵循这个思想，并且单调的排序性越强，说明额度策略越有效。**

（实际线上只能有一个额度策略，合理列举三个只是为了比较展示。）

![image-20250609223218238](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609223218238.png)



2. 额度的KS

   ​	KS：“**好坏客户的累计分布差异**的最大值绝对值”，**一般用于风控模型的风险区分效果**。**也可以用KS来表示额度对风险的区分能力**，KS越大，代表额度的风险区分能力越强。

   ​	额度区间就相当于模型分区间的映射。又因为线上只能获取“通过样本”的贷后表现，因此KS值和上线前相比往往会有一定的衰减（属于正常现象，衰减了才说明模型是有效的，说明模型策略拒掉了一部分坏客户）。**一般KS值大于0.2以上视为有风险区分能力。**

![image-20250609223707904](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250609223707904.png)



### 2.1.8 定额策略-新旧额度策略对比测试

**一、额度策略的测试方法**

1. **客观变化引起**：比如监控发现的策略效果变差、公司政策变化、客群变化等原因。
2. **主观上的挑战**：定期主动优化

测试方法和审批策略一样，线下测算+AB测试等：

* **历史样本离线测算（线下）**：需要积累足够表现其的样本数据；时效性好，无需等待；测算基于一些假设条件，结果可能存在一定偏差。
* **AB测试观察（线上）**：线上流量随机分流；需要等待贷后表现和盈利表现；测试结果更精准。

![image-20250619203433891](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619203433891.png)



**二、新旧额度离线测试**

1. **历史样本准备**

提前定好取数需求，再去回溯数据，减少重复工作。样本和数据的一般需求如下：

（1）**历史样本**（以下为举例，好坏客户及其它定义按实际情况来）

* 历史被通过，有授信额度
* 有用信行为，且有足够时长的表现期，比如6个月表现期
* 讲dpd30 + mob6定为坏客户，历史最大逾期天数<=3定为好客户（**这里逾期天数可以按照宽限期来设定**）
* 总样本量5000以上，坏客户数量至少500。

（2）**变量字段**

* 额度策略底层变量。新额度策略使用的额外的新字段，则需要进行回溯。
* 盈利数据（客户表现期内的实收利息和成本）

![image-20250619204030473](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619204030473.png)



**三、新旧额度策略的分布对比方法**

1. **旧额度区间样本，在新旧额度策略上的统计值对比**

* **旧额度区间下的样本，在新旧额度策略上分布的变化：**最小值、最大值、均值以及分位点上的变化程度。（比如下图中，以旧额度区间为准，样本在新额度策略下可能会突破旧的额度区间）

* **观察结果：**如果两个额度策略分布差异较大，则需要重新审视两个策略的合理性。

  出现额度差异大有两种情况：

  * 旧策略效果较好，说明新策略调整过度。
  * 旧策略效果欠佳，说明新策略可能调整到位。
  * 一般情况下，新旧额度策略更多的会出现少部分的大幅差异，二者绝大部分客户的授信额度判断应该是差不多的（因为大部分会监测额度策略的效果，会及时迭代）

  另一种情况：当一家机构还没有贷中续授信策略的时候，一般默认用贷前的授信额度策略，如果贷前定额策略发生巨变，可能会影响客户体验进而造成客户流失。当客户有复借需求时，如果新额度上线后的给额低，会对客户的复借体验造成比较大的影响。（解决方案：设计贷中续授信策略）

![image-20250619204938060](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619204938060.png)



2. **对额度区间、A卡模型的风险等级（A/B/C）、新旧额度策略进行透视，观察数量分布及占比的变化**

* **额度区间+A卡等级整体分布对比：（整体客群额度变化的分布）**

   看新额度策略下，样本对比旧额度的分布数量差值与百分比差值，可以**判断新额度客群的流向**。

   比如，风险等级A下，新额度策略18W-20W区间的客户占比变小，较小额度的客户占比增加，表明风险等级A的客户整体从18-20W区间流向了其它小额区间。下图中，整体从高额度流向低额度（收紧）。 

![image-20250619210426096](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619210426096.png)

* **额度变化（额度变化=新额度-旧额度）区间+A卡等级分布：（样本个体额度变化幅度的分布）**

  如下图中，新额度整体对比旧额度是下降的。

![image-20250619211802995](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619211802995.png)

实际上额度分布的差异性对比，不局限于上述的两种对比方式，也可以从其它维度去对比。**如果发现额度差异过大，需要考虑额度策略的合理性。**



**四、新旧额度策略的风险测算（风险维度）**

* 对历史样本执行新策略，生成新额度
* 对额度区间、A卡模型的风险等级（A/B/C）、新旧额度策略进行透视，统计**各分段下的额度逾期率**。
* 最后计算**样本整体的额度逾期率**，并且对比额度区间的**额度逾期率**的排序性和**额度有效系数**，来测算新额度策略在风险维度的效果。

注意：以上从风险角度的测算有一个基本假设，**即新额度变化对用信无影响。（额度降低后，可能会影响用信）**

下图是各个额度区间的，额度逾期率排序性示例（也可以再统计额度有效系数，如额度逾期率/户数逾期率）。

![image-20250619213119004](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619213119004.png)



**五、新旧额度策略的盈利测算（盈利角度）**

* 在相同额度区间条件下，分别统计新旧额度策略二维交叉数量（样本客户数）、盈利（样本盈利求和）。对于单个样本客户而言，**盈利=实收利息（含罚息）-风险损失-其它成本**
* 基于旧额度策略的实际盈利数据，测算新额度策略的盈利表现，对测算结果进行对比。

![image-20250619214204412](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619214204412.png)



具体计算方法：

核心逻辑：**基于新旧额度策略共同的部分，求单客户平均，来计算新额度策略的整体盈利**

​	选取新旧额度策略中，额度区间相同的客群的盈利水平，来代表新额度策略下该额度区间下整体的盈利能力。（以局部来评估整体）。（**个人理解，这种做法是认为相同额度区间的风险水平相同**，这样客户的盈利公式才能一致）

​	下图中矩阵对角线为额度区间相同的客群，第二张表是旧额度策略下该额度区间的盈利，**求该额度区间的平均后，乘上新额度区间的人数，认为是新额度区间下客群的所有盈利。**

两个额度策略盈利结果不一致的原因：两个策略的分布不同导致，新额度策略的分布更倾向于盈利性高的区间

​	（**好客户给予更多的额度，坏客户给予更少的额度，在利息增加的同时，减少风险损失。**也有可能给予了能还清罚息的客户更多的额度；另一种角度，不同的额度区间代表了不同的盈利能力，综合了息费和风险，新的额度策略把客户匹配到了盈利能力更高的区间）

![image-20250619214720725](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619214720725.png)



**六、新旧额度线上AB测试**

1. 有足够历史样本，离线测算后，做AB测试

   有足够的测试样本时，如果测算比较有把握，只上一个测试组。假设线上流量是稳定的，测试组少，整体观察周期短

2. 无足够的历史数据，离线统计分布，做AB测试

   如果没有足够的贷后表现数据做精确分析，退而求其次，选取近期的样本做分析。由于策略效果无法离线测算，数据支撑较弱（没有额度逾期率，盈利测算等），可以尝试性多做几套额度策略侧，多做几个测试组。整体观察周期较长。

![image-20250619220642101](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250619220642101.png)



## 2.2定价策略

### 2.2.1 定价策略概述

这里的定价策略主要是针对网贷中的消费贷产品来说。

定价主要涉及到财务和风控，也有的会涉及到产品部门。

1. **财务更关注算账**，即通过财务口径来测算是否盈利，比如预估坏账、计算拨备、坏账计提、定价政策等等。（比如年损理论上来说，是个财务口径，但由于和风控息息相关，所以做风控也要懂）
2. **风控侧则更关注差异化定价**，即对于不同的客群应该给什么样的定价。定价与额度一样是在整个决策流程的最后一环。贷前获得初始定价、贷中可以作为一种运营工具，通过调整定价来实现沉默促活、流失挽回等等。

![image-20250811205307967](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250811205307967.png)



影响定价的因素；

* 监管要求：监管要求是底线，红线。不超过24
* 客户需求
* 盈利能力
* 产品有要素
* 同业竞争：定价如果高于竞品，流量会流失

![image-20250811205912352](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250811205912352.png)

1. 客户需求最终演化成的问题是“**经营模式**”（逆向选择：优质客群活跃度不高；次级客群虽然需求很高，但是风险也很高）
2. 盈利能力最后的重点落在了“**风险控制**”上。资金成本、运营成本、营销成本等都相对固定。**风险成本则会根据机构的风险偏好和风控能力可高可低。**如果一家的风控能力一般，则盈利控制的能力也一般。
3. 产品要素的重点也是“**风险控制**“，这是从产品角度来思考的。**风险控制可以从风控的角度来控制，比如客户分层。也可以从产品角度来控制。**比如期限长短，还款方式（等额本息等等）。

![image-20250811210430887](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250811210430887.png)



### 2.2.2 不同经营模式下的定价逻辑

在设计具体定价策略之前，首先要确定**产品面向的客群和经营模式**。

* **银行优质客群**可能更关注利率。如招行闪电贷可以达到3%以下，卷定价的逻辑是因为这类客户的违约风险非常低，可以忽略不计。因此风控在这类客群上做和不做没有什么太大区别，主要看谁的定价低。（大行竞争力更强，资金成本低，也有赔本抢客户完成指标的情况）（动支率没那么高，额度使用率没那么高）。
* **互联网下称客群**风险较高，选择性很少，在银行基本借不到钱，只能去消金、小贷或者更下沉业务的机构去借钱。这时候无论24还是36，借款人因为急需用款，只要能授信通过就会支用（**动支率较高、额度使用率较高，相比利率对额度更加敏感**）。此类客群一般是封顶定价，不做差异化定价，因为不同定价对于大部分客户都是一样的且低定价可能无法覆盖风险。

![image-20250812204351982](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812204351982.png)



### 2.2.3 定价框架体系

​	风控的定价是围绕**公司层面宏观的客群经营策略**来做的。一般分为两类客群：

* **低定价客群（18以下）**：
  * 差异化定价的风险策略和产品设计
  * 确定定价区间（盈利模型）：各个成本以及盈利目标
  * 定价再调整（提高动支）：调额调价
* **高定价客群（24 or 36）**：从盈利的角度来说，高定价覆盖高风险。

![image-20250812205303531](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812205303531.png)



### 2.2.4 风险定价

​	**风险定价是指基于借款人的不同风险水平给予相应的溢价空间以达到盈利的一种差异化定价方法。**核心是**如何对借款人进行风险分层**。

​	通过不同风险成本（风险溢价），以及其它成本，来确定定价。

![image-20250812210150525](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812210150525.png)

#### 2.2.4.1 风险分层概述

​	无论哪种业务场景最终都要依靠风险分层，实现差异化和精细化的风险管理。风险分层的方法无非就是借助一些有明显风险区分度的变量来实现，变量按复杂度可分为**单变量**和**经过复杂算法训练出来的模型（高级复合变量）**。分层能力最强的当属“模型变量”“。

​	**贷前阶段常用的风险定价方法：**

1. **基于A卡模型分**划分的风险等级进行定价生成初始默认值
2. 再**以其它有效单变量进行个性化调整**

![image-20250812210613597](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812210613597.png)

#### 2.2.4.2 基于模型的风险分层

* 为什么用模型分层：模型分的风险区分度在所有变量中一般是最强的。好处是，风险区分度越强则可以划分的层次就越细，反之划分的层次就越粗。所以A卡除了其它应用外，也经常用于风险定价。
* **模型分做分层的要求**：**1、整体风险要有单调的大小排序性；2、各个分层之间的风险水平要有明显差异。**风险分层的数量理论上越多、越细越好，这样差异化风险定价的灵活度就越高，**一般工作中是分5-10挡**。
* **模型是否同时用于决策**：通常来说模型也会用于拒绝策略。因此当一个模型分既应用于决策，同时又应用于差异化定价，风险定价就**只能依赖模型分决策通过的部分**。

![image-20250812211601856](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812211601856.png)



#### 2.2.4.3 其它变量的风险分层

模型分结合其它变量，一般有以下几种模式：主要是为了放大风险差异化的能力。（**一般来说**差异化定价不要求非常精细，首要目的是覆盖风险成本）

* **模式一（决策树方式）：**先通过一些强变量进行顶层分群，每个分群中再通过模型分等级进行差异化定价。决策树的深度不建议太深。
* **模式二（调整系数）：**通过一些**模型分未使用的变量**，设置调整系数，对最终定价进行补充。
* **模式三（定价下探）：**这种方式仅针对优质客户。在原有定价基础上，如果满足更强的条件，可进行定价下探。如在风险等级A的情况下，单位等级A且模型分>800，给予更低的定价。

#### 2.2.2.4 实际案例

1. 先做基础定价（可基于多个A卡做组合矩阵）
2. 个性化调整：可通过征信报告的借还信息反推出其它机构的贷款利率，比如“**现行个人消费贷年利率求平均**。**使用该变量结合基础变量，取孰低**。调整逻辑：**低定价优质客群对利率更敏感，为了提升产品竞争力，使用更低的价格来吸引客户。**
3. 确定最终的价格（盖帽托底）

![image-20250812213930745](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250812213930745.png)

#### 2.2.2.5 个人对于测算风险成本的想法

1. 优先跟进公司整体的风险指标（类似小赢，全年大盘的终损）。
2. A卡开发完之后，取一波有完整表现的（mob13）的完整放款月样本，测算vintage终损与年化损失。结合资金成本、利润目标等，设置定价。
3. 设置完定价后，可以得到整个客群的平均定价，同时可以预估整个大盘的年损、终损上限。
4. 一般来说下沉客群都是封顶做。



# 3、模型相关

## 3.1、模型校准

模型校准的三种场景：

* 样本采样



1. **权重还原（样本采样场景）**

   ​	由于**样本采样**破坏了原本的结构分布，导致最终模型预测概率与真实概率有偏差。这种情况下可以采取权重还原的方法来进行校准。**所谓权重还原，其实就是将模型预测结果再通过样本的抽样比例变换回真实概率。** 

   ​	下图中p是抽样前坏客户（正样本概率），ODDS = 坏客户概率 / 好客户概率，w为抽样比例（**下面以对好客户欠采样为例**）。

   ​	确定抽样比例后，可以得到抽样前坏客户比例与抽样后好客户比例的关系。

   ​	**这种方式不影响模型的排序性，对模型输出的概率做整体的平移**。

![image-20250624205050233](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250624205050233.png)

在代码实操的过程中，为了防止模型有预测出概率为0或1的情况，对预测概率进行裁剪(np.clip方法)，限制概率上下限不为0或1

​	这里实际函数有两个参数，坏客户采样的比例和好客户采样的比例。实际操作中可能出现好客户降采样或者坏客户过采样的情况。根据以上公式推导后，下面填入不同的比例（如果是坏客户过采样，那么N^+^再乘上一个坏客户比例，最后的转化公式里，除上**(坏客户采样比例/好客户采样比例)**）。

![image-20250624211710189](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250624211710189.png)



可靠性曲线图实现函数（可以通过调整代码中分箱的数量来美化校准曲线）：

在高概率区间的波动会比较大，是因为高概率区间的样本数量较少，这里的概率取的是每个分箱的概率，所以样本少的时候波动会偏大。

可靠性曲线图（抽样后的样本开发出的模型，在**抽样前的样本上**，通过logit公式倒推真实概率：logit(odds~r~）=logit(odds~e~)+截距项修正，得到真实概率p。最后在根据预测概率和校准后的预测概率画可靠性曲线）：

1. 横坐标是0-1概率的等距分箱，每个分箱取中间点概率（bin_centers变量）；
2. 统计每一个预测概率在哪个分箱中；
3. 统计每一个分箱中所有预测概率的均值（bin_probs）；统计每一个分箱中实际的坏样本概率（bin_actual）。通过循环分箱序号与mask掩码数组实现。两个数组中，每个数值就索引就是分箱序号。

下图中，test_originak_woe_pred是为校准前的预测概率；calibrated_test_original_probs是校准后的概率。然后以预测概率均值（bin_probs）和实际概率（bin_actual）实际概率作为横纵坐标画图。

![image-20250624221130828](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250624221130828.png)

![image-20250624221256866](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250624221256866.png)

校准前后预测概率分布的差异：

![image-20250624221752478](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250624221752478.png)



2. **错误分配-截距项修正**

   **由样本分布变化导致的模型偏移叫做错误分配（Missassignment）。**一是样本抽样导致；二是随着时间推移，策略规则更新以及市场环境的变化会导致流入模型的样本发生变化，所以要对模型的偏移通过校准进行修正。

   **错误分配校准方法的理论基础是：逻辑回归模型的截距项可近似等于模型开发样本的“正负样本比值的对数”，所以可采取调整截距项来实现模型的校准，其本质也是对模型输出的概率结果进行平移。**

   

   **这里基于的理论是LR的截距约近似于开发样本的logit(p)。**

   如果特征x经过标准化（均值为0，标准差为1），则x=0表示所有特征取均值时：

   因为，$logit(p) = wx+b$ 

   那么，$logit(p) \approx  b$

   

![image-20250625202939542](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250625202939542.png)

通过：$logit(p)=wx+b=wx+ln(odds)$来反推，得知截距修正需要加上$ln(真实样本的坏好比/建模样本的坏好比)$

代码实现：直接在建模样本预测的概率结果上，再加上$ln（真实样本坏好比/建模样本坏好比）$即可

![image-20250625212011178](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250625212011178.png)



**使用权重还原与截距项修正两种方法结果对比：**

从样例数据来看，两种方法的结果是一致的。

![image-20250625220552521](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250625220552521.png)



# 4、贷前策略



# 5、贷中策略

## 5.1、贷中策略整体框架

​	客户授信通过后，新客逐渐转化成老客，随着老客业务深度不断加深，有了更加丰富的贷中行为，可以在风险、需求维度上做更精准的量化分析，贷中策略是通过这些行为数据“**做更精细化、差异化的服务**”，以此来达到最大化收益的目的。

​	一般来说，认为**授信通过后**就进入到了贷中环节。更精细化一点的，**授信通过后，发生逾期前**认为是贷中环节；也有将**放款通过**作为贷前与贷中的分界点，或者**放款通过，逾期之前**。具体看每家对边界点划分的定价。

​	目的是为了做精细化运营，针对老客户做相应提降额、重定价，赚取复借收益、控制坏客户等等。

![image-20250819201523237](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819201523237.png)



贷中策略有两个核心人物，一是**贷中阶段的风险监测和控制**，二是**对存量客户的控制**。

* **贷中风险管理**：监控客户在贷中的风险变化，及时发现并处置潜在风险，降低不良贷款率，提高资产质量。
  * **用信（支用）审批**：针对循环额度产品，每次支用都需要评估风险，防止客户资质变差。
  * **贷中风险预警**：主要是**监测风险变化**，对**资质变差**的客户及时采取相应的处置动作，如预催收，降额、冻结等。
* **存量客户运营**：不仅要考虑风险，还要考虑客户需求、体验等更全面的因素，通过精细化的客户分层和差异化的权益调整方式营销目标客户，以此来**促使客户用信、提高复借比例、延长客户生命周期**，实现收益最大化。
  * 营销：
    * 新增：不同产品间交叉营销（交叉营销）
    * 促活：促用信策略
    * 增值：调额调价
    * 挽留：流失预警（单个客户的生命周期是有限的，尽可能挽留客户）
  * 复借：
    * 续授信

![image-20250819202517871](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819202517871.png)



**1、循环额度产品**

​	贷中策略的精细化运营框架主要针对于“循环额度产品“设计，比如循环额度现金贷、信用卡等。原因是**循环额度产品可以根据客户丰富的贷中行为表现设计策略，一次对权益和风险进行“动态调整”**。

* **更多的行为数据**：除产品要素、还款、逾期等行为数据外，在额度有效期间内客户可自行支取授信下的剩余可用额度，因此**可产生更多交易行为**。（合同下多笔借据）
* **管控交易行为**：管控交易行为，控制风险上升，比如支用策略
* **存量运营**：基于还款、额度使用情况、支取情况、逾期情况等丰富的贷中行为数据，可设置**差异化权益调整策略，比如调额调价**，以此实现**精细化运营**的目的。

**2、非循环额度产品**

​	典型的是有场景的消费分期产品，比如车贷、商城。产品特点是额度是一次性授予的，因此借款客户仅产品要素、还款、逾期的数据，**缺少额度使用、支取等贷中行为信息**。该类产品由于数据基础条件不足，且产品属性不同，精细化运营较为困难，**一般贷中环节是风险监控**。

![image-20250819204234846](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819204234846.png)

## 5.2、贷中老客定义

**老客定义并不是固定不变的，需要根据自身在贷中策略的“精细化程度”来灵活制定**，一般按照“**账龄长短**”可以有以下多种形式的定义方式。

以下是几种老客定义（还可以向更长的账龄延申），表现期越长行为数据越多：

* 授信后
* 至少3个月还款表现（如小赢，首次放款or首次放款三个月内）
* 至少6个月还款表现
* 至少12个月还款表现
* 至少结清一次以上

![image-20250819212423928](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819212423928.png)



**1、支用场景的老客定义**

​	从**授信通过到支用**属于贷中“**短账龄老客**”。此期间由于客户未发起支用，没有还款行为。除支用**距授信的时长**信息外，**其他用于支用审批策略的数据与贷前审批策略大多类似**，因此也有很多公司将放款后定义为贷中阶段。该账龄期间的老客户主要用于“**支用环节审批**”，即是否给客户进行放款。

​	支用场景下，**经验上讲，绝大部分支用客户，会在授信通过30天内完成支用，其中在授信通过当天（也就是t0）支用的占很大比例，然后随时间增加t1,t2...，支用的人数慢慢减少，知道某个时间点停滞增长。**

![image-20250819213024480](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819213024480.png)



**2、权益调整场景的老客定义**

​	权益调整，**通俗来讲就是额度、定价的调整（也可以包括还款期限、还款方式）**，它是贷中场景精细化运营的一项重要工作。通过贷中行为信息的归纳建模，**对贷前的授信额度、定价进行一定幅度的修正和调整**，以实现收i以最大化目的。

​	**理论上来说，账龄越长，数据积累越丰富，对于客户的资质和风险评估就越准确，并且由此设计出的权益调整（比如提降额策略）才更加有效。**实际老客账龄选择可大致分为以下两种情况，实际操作也要根据自身业务条件选择：

1. **贷前为辅，贷中为主**（调整频次高）：**贷前授信偏谨慎保守**，主要依靠贷中行为进行确定性的调整。比如，贷前授信额度可能相对较低，但**随着客户贷中逐渐还款就可以考虑提额**。该情况下老客账龄门槛可相对设置较短，比如12期产品满足3个月就可以跑提额策略（或者每3个月还款周期跑一次提额策略），。因为**贷前保守且小额分散，风险相对可控，那么贷中可激进一些**。
2. **贷前为主，贷中为辅**（调整频次低）：**贷前授信较为激进**，把定额和定价一次做到位，**贷中调整幅度小、频率低**。比如，贷前授信额度可能已经相对较高，那么额度继续上涨的空间有限。又**因为贷前额度较高敞口大，贷中如果提额，需要确定性更强，因此观察周期也更长，对老客的账龄要求也就更长**，比如12期产品至少又一次结清以上才考虑提额。**中小机构一般会采取这种策略，因为贷中调整对数据基建的要求较高，需要有完善的客户标签系统。**

![image-20250819213851463](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819213851463.png)



**3、续授信场景的老客定义**

​	续授信场景下，要求贷中账龄足够长，比如12期的分期产品，一般需要“**至少有6个月以上，甚至要到12期彻底结清后**”的还款表现作为判断依据。

​	基本逻辑是，**通过观察“风险充分暴露”的贷中行为表现来判断客户的历史信用风险。**在此业务场景下，面向的是账龄相对更长的老客户，而对账龄短的，比如发起支用后未满6个月的则不满足要求。

​	根据公司目前的发展需求，权衡业务与风险可以选择不同长度的账龄，定义老客。

![image-20250819215853973](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819215853973.png)



**4、新老客分群的应用**

​	**分群策略要求划分后的各客户群体之间有明显的差异**，新老客的分群策略**通常是由于“风险维度”上有明显的差异性，即老客的风险要比新客风险低**。

​	按照前面介绍的“**账龄长短**“可将老客划分为以下几类。

1. 授信通过，但无放款

2. 授信通过，且有放款，但没有到期的客户

3. 授信通过，且有放款，且已经到期的客户

   类似漏斗，越往下账龄表现越长，数据积累越丰富，直接影响对老客户的风险识别能力。比如，对于授信通过且已经到期的客户，有完整的贷中行为数据，包括**还款、借款、逾期、额度使用等数据。**

   实际业务中，贷中老客的定义需要根据业务需要灵活调整，不是一成不变的。

![image-20250819220615651](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20250819220615651.png)

## 5.3、贷中业务指标

贷中业务指标可以分成五个部分，如下：

图中的结清率是指提前结清率，提前结清分布等。

![image-20251205094137249](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205094137249.png)



### 5.3.1 精细化运营维度

![image-20251205094442167](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205094442167.png)

**收益 = {提现率 * 复借率 * 留存率 * ····}**（这三个是比较关键的指标，还有其它指标也会影响收益）



分析方法：每个指标都对应一定的业务场景，并且有相应的策略和模型来支持。采用**cohort群组分析**，类似vintage，将不同时间段下观察到的数据按照一定的账龄周期统计。

### 5.3.2 提现率

![image-20251205095027083](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205095027083.png)

如果将提现率和时间挂钩，可以有以下公式：

* 授信N天后的提现率 = 授信后N天内提现的用户数 / 授信成功用户数

**（一）提现率案例**（类似vintage方法）：

按授信日维度来看，随着时间增长提现率增长会放缓，并达到上限。

类似A卡，授信30天后，提现率上涨比较缓慢，以该时间节点定义Y标签（**30天以内提现的客户作为目标人群，开发促动支模型**）。

![image-20251205095324665](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205095324665.png)

### 5.3.3 复借率

![image-20251205095847199](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205095847199.png)

复借率与时间挂钩：**一段时间内发生复借行为的客户数占总客户数的比例。**

**不同产品设计可能也会导致复借率差异**：如，有的产品需要上一笔借据结清后才可以借下一笔新的借据；另一种无需结清就可以借下一笔。

两种产品的复借口径不一样：

1. 结清后才可以借下一笔：时间节点从当前借据结清开始。分子为有一笔借据结清后，且又发起借款的客户数量（时间节点后，发起借款的客户数）；分母为有结清借据的客户数。
2. 无需结清也可以复借：时间节点从当前借据放款后开始。分子为时间节点后一段时间内，发起一次以上借款的总客户数；分母为当前至少一笔在贷借据或已结清借据的客户数量。

如果是这种产品设计，复借率口径分母为有一笔借据结清的客户数量



**（一）复借率案例**

![image-20251205100926138](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205100926138.png)

这里的案例，**复借率口径为结清后才能发起下一笔借据**：

**复借率 = 当前借款结清后N天内有至少一次以上借款的客户数 / 当前成功结清客户数**



存在一定的逆向选择，资质好的一般需求不会太强。

**短期复借率指标高**：短期复借率一直高，说明多头借贷严重（资金需求程度高，资质一般比较下沉），需重点管控多头风险，评估下一笔借款的逾期风险。

**长期复借率指标低**：长期复借率一直低，说明客户**借款需求不强**，有流失风险，需对客户调整营销提高复借率。



### 5.3.4 留存率

![image-20251205101741328](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205101741328.png)

留存率在不同场景下有不同定义。

贷中场景的留存率可以定义为：结清用户未来是否有新借款为标准。（与复借率很相似）

* **人头留存率**：结清客户未来一段时间内新开借据人数占总结清人数的占比。
* **余额留存率**：结清用户未来MOB余额留存占初始余额的比例。

留存率可以用来衡量客户的粘性，同时留存的反义词是流失，因此留存率也可以用来监测客户的流失倾向。

(一)留存率案例

![image-20251205102144136](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205102144136.png)



## 5.4、贷中行为变量及衍生

### 5.4.1 贷中行为变量概况

![image-20251205103946505](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205103946505.png)



![image-20251205104123406](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205104123406.png)



### 5.4.2变量衍生方法论

类似征信衍生变量的衍生方法论（RMF）进行贷中变量的衍生。

![image-20251205104257901](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205104257901.png)



![image-20251205104557256](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205104557256.png)

### 5.4.3 还款行为变量

按照是否按时还款的角度，可以将还款行为细拆分为几种：**正常还款、提前还款、逾期还款**。

其中有一个最近N个月逾期M天以上的还款次数：表示客户可能有一些还款能力，但是还款意愿有问题，存在不确定性。

![image-20251205104634093](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205104634093.png)



### 5.4.4 借款行为变量

​	借款行为可以发生在任何时刻，相比于还款有应还日来说比较灵活。其衍生思路可以围绕**时间切片的借款次数/金额统计、最近一次借款距今的时间差、以及长短时间切片的占比类变量**。（有点类似多头的衍生）

![image-20251205105309392](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205105309392.png)

### 5.4.5 逾期行为变量

​	逾期口径有多种：历史逾期、当前逾期，一般来说历史逾期的信息量比较大，挖掘围绕历史逾期多。

​	衍生思路包含：**历史逾期的时间切片统计、历史逾期的严重程度、最近一次逾期距今的时间差、最近一次逾期的严重程度**。（反映逾期频率、逾期程度、近期风险）

![image-20251205105914309](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205105914309.png)

### 5.4.6 额度使用变量

​	额度使用率从风险和营销的角度看是不太一样的，某种程度也是由于客户逆向选择导致。

* 风险角度：额度使用率越高，风险越高。一般来说资金需求程度高的，资质会偏下沉。
* 营销角度：使用率高，资金需求程度高，需求旺盛，往往会成为营销的对象。

![image-20251205140324213](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205140324213.png)



### 5.4.7 权益调整行为变量

​	权益调整一般为：**额度、定价、还款方式、期数（产品要素）**等调整。这些调整记录一般也会留存，可以用来衍生。

![image-20251205141922769](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205141922769.png)



### 5.4.8 扣款行为变量

​	一般金融机构扣款前会有两次账户检查：

1. 第一次检查如果资金不足，则会发短信提示客户，并扣除这部分还款资金（有多少扣多少）。
2. 第二次再扣款完整（剩余的应还金额）。

**扣款失败行为指向还款能力差的客户，如果经常出现扣款失败或者扣款失败率高，则说明客户的还款能力弱。**

![image-20251205142917340](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205142917340.png)



## 5.5、贷中长短周期风险

### 5.5.1 时间维度风险分类

​	本质上是从时间维度上做精细化风险控制的一种方式。

​	比如A卡中，会有不同账龄的Y标签，如dpd30+mob6/12、fpd7/15/30。

![image-20251205143409974](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205143409974.png)

### 5.5.2 长短周期的风险稳定性

​	**短周期风险变化较快，长期风险变化相对缓慢**。

​	如，长短周期标签在模型的表现上尤其明显。

​	离线开发模型时，短周期标签模型的KS一般要高于长周期模型。但实际上线后，随时间推移，短周期模型的效果也会衰减更严重，而长周期模型相对更稳定。

​	洋钱罐一种的做法：离线开发的时候，在短周期标签样本（如，dpd30+mob3）中，加入一部分长周期标签（如，dpd30+mob12）的样本。评估模型性能的时候，除了看开发样本上的效果，还会看模型对历史放款月的vintage曲线，尾部的趋势的影响。

​	从下面右侧图有很强的业务解释性。

1. 从长周期来看，不管是下沉客群还是优质客群，整体风险波动较小（横线），除非行业发生了明显的变化。
2. 从短周期来看（局部曲线），风险波动是存在的，所以会导致模型效果衰减快。

![image-20251205143732066](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205143732066.png)



### 5.5.3 长短周期的风险特征

* **短期风险**：短期风险可以理解为**“临时或者突发”的风险**，并非一直持续的。短期资金需求反映到具体行为上，一般是**多头升高、负债升高、额度使用率高**。
* **长期风险**：长期指**拉长时间去衡量一个客户的资质，忽视短期的波动**。长周期风险，一般从**收入、资产、现金流、公积金、学历、工作稳定性**这些指标上反映，并且变化速率相对较慢。

简单来说，**短期看多头和负债，长期看个人资产和现金流等**。

![image-20251205144442137](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205144442137.png)



### 5.5.4 贷中长短期风险应用

贷中场景大致分成三个部分：

1. 动支策略：每次动支的动机可能不同，**对于每次动支预防的主要是当前的短期风险，例如多头、负债**。
2. 风险预警：一般是按周期跑批规则预警（比如按月），同时监控**长期和短期的风险变化**，预警后采取相应的处置措施，如额度冻结、降额等。
3. 存量运营：**主要针对存量客户的生命周期管理，主要关注长期风险**，识别出优质客户后，采取提额、降息等方式长期运营，提升复购率，赚取超额收益。从客户体验上来说，并不会因为短期风险变化，频繁提额、降额、冻结。

一般来说，**做存量优质客群时，不会去看短期风险（考虑用户体验）**，短期风险可以通过风险预警触发。

![image-20251205145707085](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205145707085.png)



### 5.5.5 贷中的长短期风险的区分

​	在贷中场景需要同时关注长周期和短周期的风险。

在长短周期标签区分的时候，需要注意：

​	如果以MOB3作为长短周期界限，定义在MOB3以内为短周期，MOB3-MOB12为长周期。

* 短周期：MOB3内发生逾期超过一定天数定义为坏客户。

* 长周期：**需要剔除MOB3内的逾期样本，而只观察MOB3-MOB12是否会发生逾期，排除短周期逾期对长周期的干扰。**

  （如果不剔除，看了整体，实际上把短周期的风险也包含进去了）

![image-20251205150828356](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205150828356.png)



## 5.6、贷中支用策略（1）：模式和框架

### 5.6.1 支用场景介绍

​	主要用在循环额度产品。

![image-20251205151755139](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205151755139.png)



### 5.6.2 支用场景的风险理解

​	对于放贷机构而言，支用意味着资金真正的流出，一旦放出就形成了真实的风险敞口，是否能收回本息，主动权掌握在借款人手里。

​	支用策略的意义：**时间会让风险变化**。在授信有效期内，客户的资质可能会随着时间变化，因此在支用环节需要**再次动态评估借款人的风险变化**，也叫做授信一道风险之后的“**二道风控**”。

![image-20251205152159674](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205152159674.png)



### 5.6.3 “授信+支用”策略模式

​	这一部分较为宏观。 

* 轻授信，重支用：高定价小额产品（偏下沉客户）。最大化利用流量+获取更多数据，客户体验可能较差。
* 重授信，轻支用：低定价大额产品（资质较好的客户）。你可能在授信环节做到精准，提高客户体验，支用环节仅拒绝少部分短期风险较高的客户。

![image-20251205163910153](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205163910153.png)



### 5.6.4 支用审批策略框架

一种常用的支用审批框架是**按照客户在平台账龄长短进行分群，做差异化策略**：

1. 先根据首借和复借来做划分（风险差异和数据丰富度）：
   * 首次支用：相当于新客
   * 多次支用：相当于老客
2. 对于新客：根据支用时间据授信时间长短来分群，一般以30天为界限。支用距离授信时间较长的，策略会相对严格（客户资质可能变化）。
3. 对于老客：多次支用可以使用贷中交易行为数据和B卡模型来进行决策。

![image-20251205164540200](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205164540200.png)



### 5.6.5 支用审批策略数据

​	在数据维度上，**支用的审批策略可以复用贷前策略所使用的**，即贷前所使用的数据维度在支用环节也都可以拿来继续使用。

​	不仅是数据维度上，贷前策略所使用的规则也可以在支用环节服用。因为不同时点下客户的数据会发生变化（**资质变化**），则变量规则的判断结果也会相应改变。

![image-20251205165257280](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205165257280.png)

​	

​	一般贷前动态的数据，贷中支用策略会重复使用（比如**黑名单、欺诈名单、征信、三方数据、埋点等**）。**不一定要全部使用，挑选对支用有帮助的数据（也可以调整相关的阈值）**。

​	除贷前的数据外，支用环节还有新增可使用的数据维度：

* 信息变动（密码找回、银行卡解绑、更换手机号）
* 贷中行为（借款、还款、逾期、额度使用）
* 交易数据（交易频率、交易集中度、交易时间等）
* 关联网络（关联集中度、一二度关联涉黑（团伙欺诈、AB贷等）等），反欺诈方向

![image-20251205165617079](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251205165617079.png)



## 5.7、贷中支用策略（2）：首次支用

### 5.7.1 策略分群	

​	支用策略的意义在于发现随时间变化的动态风险（授信阶段未发现）。

​	首次支用分群一般可以按照”**支用时点距授信时间间隔长短**“来划分。

* 一般来说，大部分客户会在授信通过后几天内发生支用。
* 支用距授信时间越长，首逾越高，具有一定排序性和业务解释性。可以简单概括为”**夜长梦多**“。

![image-20251208140718143](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208140718143.png)

### 5.7.2 分群下策略设计	

​	分群时间间隔根据客群风险来制定，30天一般比较适用于下沉高风险客群，因为下沉客群活跃，风险短期变化较快。而针对优质的低风险客群可以适当增加时间间隔，如60/90/180天。分群间隔根据业务具体情况调整，非固定不变，也可以按照多个边界分为多个群体。以下案例以30天为例：

* 30天内间隔较短，可以认为与授信差不多，没有必要拒绝太多，可以直接使用**贷前授信的缓存数据**，无需查询新数据，新增规则可制定较宽松阈值。
* 30天以外，综合考虑数据成本，规则阈值设定较严格。
* 这个**30天**，选取应该从风险集中开始爆发的时间节点进行选取（个人理解：授信后多长时间支用风险上升变快）。

![image-20251208141315430](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208141315430.png)

### 5.7.3 短时间间隔支用策略

​	间隔时间较短，支用风险约等于授信风险，该情况下**策略设计可以从简**。比如只看黑名单、欺诈等拒绝效果较高的规则，征信和三方数据如有需要也可以筛选部分。

![image-20251208141852990](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208141852990.png)



### 5.7.4 长时间间隔支用策略

​	**因为间隔时间较长，支用环节可能有新增风险，因此策略设计上要针对“动态的新增风险”进行控制。**大致的原则是策略上使用更多的维度评估风险（除原授信规则外），并且授信策略较为严格，时间间隔越长就越严格，最严格的情况下进入人工审批（综合考虑客户体验）。

​	除了贷前授信中的一些固定规则外，还可以考虑**趋势类变量**，如：

* 多头类，支用时多头借贷申请次数比授信时增加了3次以上等。
* 欺诈类，IP/GPS稳定度、绑卡操作次数、关系网络涉黑数量、APPLIST新安装的贷款软件数量等。

![image-20251208142511358](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208142511358.png)



### 5.7.5 首次支用策略细化案例

1、金额大小维度案例

​	单笔支用金额较大，且支用时点距离授信时间较长，这个时候需要严肃对待，在有选择地情况下，会上严格的策略。

![image-20251208143507168](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208143507168.png)

## 5.8、贷中支用策略（3）：复借支用

### 5.8.1 复借支用场景介绍

​	**与首次支用的不同之处是，客户在平台的生命周期更长，同时可能有了部分的还款行为数据，对于判断客户风险更加准确。**

![image-20251208144251147](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208144251147.png)



### 5.8.2 复借支用策略的客群对象

​	为了更好区分首借和复借场景以及高效使用贷中行为数据，复借支用策略对客户还款表现的时长有一定要求，**主要针对“至少有3个月以上表现期的老客”**。（一般新老客定义，新客是从未发生过借款或首次借款时间在3个月以内的客户）。

​	个人理解：新老客定义是从业务出发的，支用策略首借复借是从风险的角度出发的。

![image-20251208144534728](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208144534728.png)

### 5.8.3 复借支用策略的数据维度及规则设计

​	与首次支用不同的是，复借场景下可能存在尚未结清的贷款，所以要判断当前是否有逾期。此外复借场景下，有贷中行为表现数据做为支撑，其它数据维度和授信类似，可以复用或者适当调整。

1. 黑名单、司法类
   * 复借时当前逾期
2. 反欺诈
   * 人脸识别、背景反欺诈
   * 个人信息异常，多人填写同一手机号；同一手机号关联过多明显不同的联系人姓名
   * **设备异常**，如wifi信息中出现XX贷、XX金服字样；同一设备关联多个申请人。这两个很可能会有中介骗贷风险。
   * 地址异常，如GPS某地聚集申请人数超过30人，但是需要排除某些特殊地点，比如某银行分支行（现场办理业务）。
   * 交易反欺诈，同一客户同一天发起多笔小额支用，并当天还款，可能会有刷单刷信用记录的行为。
3. 贷中行为
4. 多头、负债、逾期

![image-20251208145628008](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208145628008.png)



### 5.8.4 复借支用策略的框架设计

复借支用策略的几种框架：

1. **直接复用授信审批策略**：业务冷启动阶段或中小机构缺乏经验。这种方法的优势是简单，缺点是不够细致。
2. **授信+贷中行为**：授信规则的数据维度 + 趋势类变量 + 贷中交易行为数据制定硬规则。业务发展中期，还未积累非常多的贷中数据时可以使用。
3. **积累了较多贷中数据后，细化分层，比如基于B卡分层**。不同分层下设置不同松紧程度的规则，设置不同通过率要求。好处是差异化策略能让效果接近最优，并减少部分数据成本；缺点就是相对复杂，迭代时会增加工作量，每个分层都要单独去评估。因此分层也要根据实际需求综合考量。

![image-20251208151748963](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208151748963.png)



### 5.8.5 复借支用策略的策略调优

​	如果基于B卡分数进行风险分层，希望达到的效果是风险低的老客几乎不去压降，而风险高的老客适当压降以控制贷中风险。通过率压降幅度根据贷后风险表现来动态调整。

​	如果贷后风险升高，一般是回溯数据离线分析，判断策略模型是否还有排序性，对阈值收紧后，可以分析每个分层下客群的坏账率变化以及整体坏账率变化情况。

![image-20251208152517699](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208152517699.png)



## 5.9、贷中风险预警策略

### 5.9.1 贷中风险预警介绍

1. 在借款人收信后，根据其动态的行为和信息变化执行实时风险决策和定期的离线风险排查，以及对应的处置措施。
2. 修正贷前审批结果误差，比如调额调价等权益类调整措施。

![image-20251208153240291](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208153240291.png)



### 5.9.2 贷中风险预警设计要点

1. 提前感知借款人风险，控制未来潜在会发生的风险，对应处置 措施。
2. 风险已经出现时及时止损的一系列动作。
3. 预警指标监控，做好策略优化，达到动态平衡（减少误杀）。

![image-20251208154152109](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208154152109.png)



### 5.9.3 贷中风险预警设计：预警指标体系

​	这里主要针对互金个贷C端业务。如果是小微贷款或者企业贷款，还需要涉及B端的指标体系，且需要根据不同业务设计不同的预警指标体系。

![image-20251208154516304](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208154516304.png)



### 5.9.4 贷中风险预警设计：预警策略规则（1）

​	和贷前策略差不多，分成单规则、二维交叉规则、多维组合规则*决策树）等。

![image-20251208155055094](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208155055094.png)



### 5.9.5 贷中风险预警设计：预警策略规则（2）

​	不同的贷中预警设置不同的预警等级，以匹配不同的处置措施。

![image-20251208155757128](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208155757128.png)



### 5.9.6 贷中风险预警设计：预警策略规则（3）

* 从严处理：至少存在一个以上的预警，则记该客户为命中预警，预警等级取命中的预警强度中最为严重的一个。

![image-20251208160136056](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208160136056.png)

* 综合评分卡：每一条预警等级给一个分数（权重），最后计算整体的分数，对最后的综合分数进行分层预警。业务初期，分数是专家经验拍的，积累了数据之后可以对整体分数进行测算（不同分数可以看到不同的逾期率）。

![image-20251208160422181](%E9%A3%8E%E6%8E%A7%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0.assets/image-20251208160422181.png)