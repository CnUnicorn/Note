# 皮尔森相关系数的r值和p值

皮尔森相关系数（Pearson correlation coefficient）用于衡量两个变量之间的线性相关程度。计算得到的两个重要值是 rrr 值和 ppp 值。

### r 值

rrr 值是皮尔森相关系数，其取值范围为 -1 到 1，表示两个变量之间的线性相关性：

- **r=1r = 1r=1**：完全正相关，意味着一个变量增加，另一个变量也以固定比例增加。
- **r=−1r = -1r=−1**：完全负相关，意味着一个变量增加，另一个变量以固定比例减少。
- **r=0r = 0r=0**：无线性相关，意味着两个变量之间没有线性关系。

一般来说，rrr 值的绝对值越接近 1，相关性越强；越接近 0，相关性越弱。

### p 值

p 值用于检验相关系数的显著性，表示在原假设（即两个变量无相关性）成立的情况下，观察到的相关系数（或更极端）的概率。具体含义如下：

- **p 值很小（通常小于 0.05）**：表明相关系数显著，拒绝原假设，意味着两个变量之间的相关性不是由随机误差引起的。
- **p 值较大**：表明相关系数不显著，接受原假设，意味着两个变量之间的相关性可能是由随机误差引起的。

总结：

- **r 值**：衡量相关性的强弱和方向。
- **p 值**：检验相关性是否显著。

通过结合 rrr 值和 ppp 值，我们可以判断两个变量之间是否存在显著的线性关系，以及这种关系的强弱和方向。



# lift

单箱lift计算：

（1）分箱内坏客率bad_rate（分箱内坏客户的数量 / 分箱总客户数量） / 样本平均坏客率（整个样本的坏客率）;**从区分度的角度理解，分箱内坏样本率和随机（整体平均）相比**

（2） 边际坏客户占比（分箱内坏客户数量/总坏客户数量） / 分箱客户数占比（分箱总客户数量/总客户数量）；**从经济角度理解，拒绝掉了多少客户，能噶掉多少比例的坏客户**（拒掉的坏客户 / 所有的坏客户）

如果要求累计lift，那么以上公式中的变量替换成累计量即可：

cum_bad_rate / 整体坏样本率

cum_bad_prop / cum_total_prop



示例可参考这篇文章：

https://mp.weixin.qq.com/s/1IS5NNbylNACNDZyr3oOjg







# 规则中的精确率（precision）\召回率（recall）\ LIFT

在规则中，

* 精确率就是cum_bad_rate，预测的这一批坏客户中，实际有多少是真的坏。  TP / (TP + FP)
* 召回率就是cum_bad_prop，预测对的坏客户 占 所有坏客户的比例（召回了多少坏）。TP / (TP + FN)

lift可以与通过率挂钩，拒绝策略的性价比：（实际拒绝掉的坏客户占所有坏客户的比例） / 拒绝客户的比例

**可先看lift，再看通过率，然后看精确率，最后看召回率**



# 滚动率

滚动率可以是客户维度，也可以是金额维度。目的是看**到什么程度的客户算坏**

如果是客户维度：

1. 先统计观察期每个客户的逾期级别（C，M1，M2，M3，M4+）；再统计表现期（观察点后的一段时间）内，每个客户的逾期级别
2. 交叉1中的两部分客户，即可统计得到滚动率数据。（具体sql：客户名称inner join，然后根据观察期和表现期的逾期级别分组，统计客户数量）

滚动率观察期时间长短可调整，观察点也可以调整，避免单一观察点的偶然性。



# 迁徙率

迁徙率表示上个月某个逾期等级向下跃迁的比例。

如M1-M2迁徙率 = 当月进入M2的贷款余额 / 上月末M1的贷款余额 



从大盘数据可以看得出来，M1-M2的迁徙率普遍比较高70-~80左右，有的mob可以达到100。说明大部分客户只要逾期了，就很可能会一直逾期下去，因此M0-M1的迁徙率比较重要。

